(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{105:function(e,t,n){},151:function(e,t,n){},152:function(e,t,n){},178:function(e,t,n){},180:function(e,t,n){},279:function(e,t,n){},280:function(e,t,n){},281:function(e,t,n){},282:function(e,t,n){},283:function(e,t,n){},284:function(e,t,n){},285:function(e,t,n){},287:function(e,t,n){},288:function(e,t,n){},289:function(e,t,n){},290:function(e,t,n){},291:function(e,t,n){},292:function(e,t,n){},293:function(e,t,n){},294:function(e,t,n){},295:function(e,t,n){},296:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),s=n(36),c=n.n(s),i=(n(151),n(152),n(24)),o=n(20),u=n(3),l=n.n(u),d=n(7),j=n(10),b=n(4),h=n(17),m=n.n(h),p="track_app_auth_token";var f={isAuthenticated:!1,login:function(e,t){return Object(d.a)(l.a.mark((function n(){var r;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,m.a.post("/api/auth/login",{userName:e.userName,password:e.password});case 3:return r=n.sent,f.isAuthenticated=!0,a=r.data.token,localStorage.setItem(p,a),t(Object(b.a)(Object(b.a)({},r.data.user),{},{token:r.data.token}),null),n.abrupt("return",r.data);case 10:n.prev=10,n.t0=n.catch(0),f.isAuthenticated=!1,t(null,{message:n.t0.response.data.message});case 14:case"end":return n.stop()}var a}),n,null,[[0,10]])})))()},tokenLogin:function(e){return Object(d.a)(l.a.mark((function t(){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=localStorage.getItem(p)){t.next=6;break}return f.isAuthenticated=!1,console.log("Token not found"),e(null),t.abrupt("return");case 6:return console.log("Token found"),r=null,t.prev=8,t.next=11,m.a.get("/api/user/login",{headers:{Authorization:"Bearer ".concat(n)}});case 11:r=t.sent,f.isAuthenticated=!0,e(Object(b.a)(Object(b.a)({},r.data),{},{token:n}),null),t.next=20;break;case 16:t.prev=16,t.t0=t.catch(8),f.isAuthenticated=!1,e(null,{message:t.t0.message});case 20:return t.abrupt("return",r);case 21:case"end":return t.stop()}}),t,null,[[8,16]])})))()},signup:function(e,t){return Object(d.a)(l.a.mark((function n(){var r;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,m.a.post("/api/auth/register",Object(b.a)({},e));case 3:return r=n.sent,console.log(r),t(r.data,null),n.abrupt("return",r.data);case 9:n.prev=9,n.t0=n.catch(0),t(null,{message:n.t0.message});case 12:case"end":return n.stop()}}),n,null,[[0,9]])})))()},logout:function(e){return Object(d.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:f.isAuthenticated=!1,localStorage.removeItem(p),e();case 3:case"end":return t.stop()}}),t)})))()},changePassword:function(e,t,n,r){return Object(d.a)(l.a.mark((function a(){var s;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,console.log("authApi",{currentPassword:e,newPassword:t}),a.next=4,m.a.patch("/api/user/changePassword",{currentPassword:e,newPassword:t},{headers:{Authorization:"Bearer ".concat(n)}});case 4:return s=a.sent,console.log(s),r(null),a.abrupt("return",s.data);case 10:a.prev=10,a.t0=a.catch(0),r({message:a.t0.response.data.message});case 13:case"end":return a.stop()}}),a,null,[[0,10]])})))()}},x=f,O=n(0),v=Object(r.createContext)({});function g(e){var t=function(){var e=Object(r.useState)(null),t=Object(j.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(!1),c=Object(j.a)(s,2),i=c[0],o=c[1],u=Object(r.useState)(null),b=Object(j.a)(u,2),h=b[0],m=b[1];Object(r.useEffect)((function(){var e=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.tokenLogin((function(e){e?console.log("Logged in as "+e.userName):console.log("Not logged in"),a(e),m(null),o(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();console.log("Logging in with token"),o(!0),e()}),[]);var p=function(e,t){console.log("logging in"),o(!0),x.login(e,(function(e,n){n?m(n):(a(e),m(null),t(e))})),o(!1)};return{user:n,isLoading:i,error:h,signup:function(e,t){return x.signup(e,(function(e){console.log(e),t(e)}))},login:p,logout:function(e){return x.logout((function(){a(null),m(null),e&&e()}))},changePassword:function(e,t,r){return x.changePassword(e,t,n.token,(function(e){e?(m(e),r(e)):(m(null),r(null))}))}}}();return Object(O.jsx)(v.Provider,{value:t,children:e.children})}function y(){return Object(r.useContext)(v)}var w=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=Object(r.useState)({data:[],isLoading:!1,isError:!1}),s=Object(j.a)(a,2),c=s[0],i=s[1],o=Object(r.useState)(!1),u=Object(j.a)(o,2),b=u[0],h=u[1],p=function(){return h((function(e){return!e}))};return Object(r.useEffect)((function(){var r=function(){var r=Object(d.a)(l.a.mark((function r(){var a,s,c,o;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i({data:[],isLoading:!0,isError:!1}),r.prev=1,a=t?{Authorization:"Bearer ".concat(t)}:{},!n){r.next=15;break}if(0!==n.length){r.next=6;break}return r.abrupt("return",i({data:[],isLoading:!1,isError:!1}));case 6:return c=[],n.forEach((function(t){c.push(m.a.get(e+"/"+t,{headers:a}))})),r.next=10,Promise.all(c);case 10:s=r.sent,o=s.map((function(e){return{id:e.headers["content-fileid"],filename:e.headers["content-filename"],data:e.data}})),i({data:o,isLoading:!1,isError:!1}),r.next=19;break;case 15:return r.next=17,m.a.get(e,{headers:a});case 17:s=r.sent,i({data:s.data,isLoading:!1,isError:!1});case 19:r.next=25;break;case 21:r.prev=21,r.t0=r.catch(1),console.log(r.t0),i({data:r.t0,isLoading:!1,isError:!0});case 25:case"end":return r.stop()}}),r,null,[[1,21]])})));return function(){return r.apply(this,arguments)}}();r()}),[e,t,b]),[c,i,p]};function k(e){return{Authorization:"Bearer ".concat(e)}}function N(){return(N=Object(d.a)(l.a.mark((function e(t,n,r){var a,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=k(r),e.next=4,m.a.post("/api/projects/".concat(t,"/issues"),n,{headers:a});case 4:return s=e.sent,e.abrupt("return",s.data);case 8:throw e.prev=8,e.t0=e.catch(0),console.error(e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function I(){return(I=Object(d.a)(l.a.mark((function e(t,n,r,a){var s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=k(a),e.next=4,m.a.patch("/api/projects/".concat(t,"/issues/").concat(n),r,{headers:s});case 4:return c=e.sent,e.abrupt("return",c.data);case 8:throw e.prev=8,e.t0=e.catch(0),console.error(e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function S(){return(S=Object(d.a)(l.a.mark((function e(t,n,r){var a,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=k(r),e.next=4,m.a.delete("/api/projects/".concat(t,"/issues/").concat(n),{headers:a});case 4:return s=e.sent,e.abrupt("return",s.data);case 8:throw e.prev=8,e.t0=e.catch(0),console.error(e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function C(){return(C=Object(d.a)(l.a.mark((function e(t,n,r,a){var s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=k(a),e.next=4,m.a.patch("/api/projects/".concat(t,"/issues/").concat(n,"/assign"),{assigneeId:r},{headers:s});case 4:return c=e.sent,e.abrupt("return",c.data);case 8:throw e.prev=8,e.t0=e.catch(0),console.error(e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function A(){return(A=Object(d.a)(l.a.mark((function e(t,n,r,a){var s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=k(a),e.next=4,m.a.patch("/api/projects/".concat(t,"/issues/").concat(n,"/advance"),{status:r},{headers:s});case 4:return c=e.sent,e.abrupt("return",c.data);case 8:throw e.prev=8,e.t0=e.catch(0),console.error(e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function T(){return(T=Object(d.a)(l.a.mark((function e(t,n,r,a){var s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=k(a),e.next=4,m.a.post("/api/projects/".concat(t,"/issues/").concat(n,"/comments"),{comment:r},{headers:s});case 4:return c=e.sent,console.log(c),e.abrupt("return",c.data);case 9:throw e.prev=9,e.t0=e.catch(0),console.error(e.t0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function P(){return(P=Object(d.a)(l.a.mark((function e(t,n,r,a,s){var c,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=k(s),e.next=4,m.a.patch("/api/projects/".concat(t,"/issues/").concat(n,"/comments/").concat(r),{comment:a},{headers:c});case 4:return i=e.sent,console.log(i),e.abrupt("return",i.data);case 9:throw e.prev=9,e.t0=e.catch(0),console.error(e.t0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function D(){return(D=Object(d.a)(l.a.mark((function e(t,n,r,a){var s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=k(a),e.next=4,m.a.delete("/api/projects/".concat(t,"/issues/").concat(n,"/comments/").concat(r),{headers:s});case 4:return c=e.sent,console.log(c),e.abrupt("return",c.data);case 9:throw e.prev=9,e.t0=e.catch(0),console.error(e.t0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function E(){return(E=Object(d.a)(l.a.mark((function e(t,n,r,a,s){var c,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=k(a),i={onUploadProgress:function(e){var t=Math.round(100*e.loaded/e.total);s&&"function"===typeof s&&s(t)},headers:c},e.abrupt("return",m.a.post("/api/projects/".concat(t,"/issues/").concat(n,"/attachments"),r,i));case 6:throw e.prev=6,e.t0=e.catch(0),console.error(e.t0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function B(){return(B=Object(d.a)(l.a.mark((function e(t,n,r,a){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=k(a),e.abrupt("return",m.a.get("/api/projects/".concat(t,"/issues/").concat(n,"/attachments/").concat(r),{headers:s}));case 5:throw e.prev=5,e.t0=e.catch(0),console.error(e.t0),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function L(){return(L=Object(d.a)(l.a.mark((function e(t,n,r,a){var s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=k(a),c=m.a.delete("/api/projects/".concat(t,"/issues/").concat(n,"/attachments/").concat(r),{headers:s}),console.log(c),e.abrupt("return",c);case 7:throw e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var F={createIssue:function(e,t,n){return N.apply(this,arguments)},updateIssue:function(e,t,n,r){return I.apply(this,arguments)},deleteIssue:function(e,t,n){return S.apply(this,arguments)},assignIssue:function(e,t,n,r){return C.apply(this,arguments)},advanceIssue:function(e,t,n,r){return A.apply(this,arguments)},addComment:function(e,t,n,r){return T.apply(this,arguments)},updateComment:function(e,t,n,r,a){return P.apply(this,arguments)},deleteComment:function(e,t,n,r){return D.apply(this,arguments)},createAttachment:function(e,t,n,r,a){return E.apply(this,arguments)},getAttachment:function(e,t,n,r){return B.apply(this,arguments)},deleteAttachment:function(e,t,n,r){return L.apply(this,arguments)}},R=F;function q(){return(q=Object(d.a)(l.a.mark((function e(t,n){var r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=k(n),e.next=4,m.a.post("/api/projects",t,{headers:r});case 4:return a=e.sent,e.abrupt("return",a);case 8:throw e.prev=8,e.t0=e.catch(0),console.error(e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function K(){return(K=Object(d.a)(l.a.mark((function e(t,n,r){var a,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=k(n),e.next=4,m.a.patch("/api/projects/".concat(t),r,{headers:a});case 4:return s=e.sent,e.abrupt("return",s);case 8:throw e.prev=8,e.t0=e.catch(0),console.error(e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function U(){return(U=Object(d.a)(l.a.mark((function e(t,n){var r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=k(n),e.next=4,m.a.delete("/api/projects/".concat(t),{headers:r});case 4:return a=e.sent,e.abrupt("return",a);case 8:throw e.prev=8,e.t0=e.catch(0),console.error(e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function V(){return(V=Object(d.a)(l.a.mark((function e(t,n,r){var a,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=k(r),e.next=4,m.a.post("/api/projects/".concat(t,"/collaborators"),{collaboratorId:n},{headers:a});case 4:return s=e.sent,e.abrupt("return",s);case 8:throw e.prev=8,e.t0=e.catch(0),console.error(e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function W(){return(W=Object(d.a)(l.a.mark((function e(t,n,r){var a,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=k(r),e.next=4,m.a.delete("/api/projects/".concat(t,"/collaborators"),{collaboratorId:n},{headers:a});case 4:return s=e.sent,e.abrupt("return",s);case 8:throw e.prev=8,e.t0=e.catch(0),console.error(e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}var _={createProject:function(e,t){return q.apply(this,arguments)},updateProject:function(e,t,n){return K.apply(this,arguments)},deleteProject:function(e,t){return U.apply(this,arguments)},addProjectCollaborator:function(e,t,n){return V.apply(this,arguments)},removeProjectCollaborator:function(e,t,n){return W.apply(this,arguments)}},z=_,H=Object(r.createContext)({});function J(e){var t=function(){var e=y(),t=w("/api/projects",e.user?e.user.token:null),n=Object(j.a)(t,2),r=n[0],a=n[1],s=function(){var t=Object(d.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.data,t.next=3,z.deleteProject(r.projectId,e.user.token);case 3:a((function(e){var t=e.data.slice(),n=t.findIndex((function(e){return e.id===r.projectId}));return t.splice(n,1),Object(b.a)(Object(b.a)({},e),{},{data:t})}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),c=function(){var t=Object(d.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.createProject(n,e.user.token);case 2:r=t.sent,a((function(e){var t=e.data.slice();return t.push(Object(b.a)(Object(b.a)({},r.data),{},{issues:[]})),Object(b.a)(Object(b.a)({},e),{},{data:t})}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),i=function(){var e=Object(d.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),o=function(){var t=Object(d.a)(l.a.mark((function t(n){var r,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.data,a=n.values,t.next=3,z.addProjectCollaborator(r.projectId,a.collaboratorId,e.user.token);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),u=function(){var t=Object(d.a)(l.a.mark((function t(n,r){var s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R.createIssue(n,r,e.user.token);case 2:return s=t.sent,a((function(e){var t=e.data.slice(),r=t.findIndex((function(e){return e.id===Number(n)}));return t[r].issues.push(s),Object(b.a)(Object(b.a)({},e),{},{data:t})})),t.abrupt("return",s);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),h=function(){var t=Object(d.a)(l.a.mark((function t(n,r){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R.deleteIssue(n,r,e.user.token);case 2:a((function(e){var t=e.data.slice(),a=t.findIndex((function(e){return e.id===Number(n)})),s=t[a]&&t[a].issues&&t[a].issues.length>0&&t[a].issues.findIndex((function(e){return e.id===Number(r)}));return t[a].issues.splice(s,1),Object(b.a)(Object(b.a)({},e),{},{data:t})}));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),m=function(){var t=Object(d.a)(l.a.mark((function t(n,r,s){var c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==Object.keys(s).length){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,R.updateIssue(n,r,s,e.user.token);case 4:c=t.sent,a((function(e){var t=e.data.slice(),a=t.findIndex((function(e){return e.id===Number(n)})),s=t[a]&&t[a].issues&&t[a].issues.length>0&&t[a].issues.findIndex((function(e){return e.id===Number(r)}));return t[a].issues[s]=c,Object(b.a)(Object(b.a)({},e),{},{data:t})}));case 6:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),p=function(){var t=Object(d.a)(l.a.mark((function t(n,r,s){var c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R.assignIssue(n,r,s,e.user.token);case 2:c=t.sent,a((function(e){var t=e.data.slice(),a=t.findIndex((function(e){return e.id===Number(n)})),s=t[a]&&t[a].issues&&t[a].issues.length>0&&t[a].issues.findIndex((function(e){return e.id===Number(r)}));return t[a].issues[s]=c,Object(b.a)(Object(b.a)({},e),{},{data:t})}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),f=function(){var t=Object(d.a)(l.a.mark((function t(n,r){var s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R.advanceIssue(n,r,"inprogress",e.user.token);case 2:s=t.sent,a((function(e){var t=e.data.slice(),a=t.findIndex((function(e){return e.id===Number(n)})),c=t[a]&&t[a].issues&&t[a].issues.length>0&&t[a].issues.findIndex((function(e){return e.id===Number(r)}));return t[a].issues[c]=s,Object(b.a)(Object(b.a)({},e),{},{data:t})}));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),x=function(){var t=Object(d.a)(l.a.mark((function t(n,r,s){var c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R.advanceIssue(n,r,s,e.user.token);case 2:c=t.sent,a((function(e){var t=e.data.slice(),a=t.findIndex((function(e){return e.id===Number(n)})),s=t[a]&&t[a].issues&&t[a].issues.length>0&&t[a].issues.findIndex((function(e){return e.id===Number(r)}));return t[a].issues[s]=c,Object(b.a)(Object(b.a)({},e),{},{data:t})}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),O=function(){var t=Object(d.a)(l.a.mark((function t(n,r,a,s){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",R.createAttachment(n,r,a,e.user.token,s));case 1:case"end":return t.stop()}}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}(),v=function(e,t,n){a((function(r){var a=r.data.slice(),s=a.findIndex((function(t){return t.id===Number(e)})),c=a[s]&&a[s].issues&&a[s].issues.length>0&&a[s].issues.findIndex((function(e){return e.id===Number(t)})),i=a[s].issues[c].attachmentHandles||[];return a[s].issues[c].attachmentHandles=i.concat(n),Object(b.a)(Object(b.a)({},r),{},{data:a})}))},g=function(){var t=Object(d.a)(l.a.mark((function t(n,r,a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R.deleteAttachment(n,r,a,e.user.token);case 2:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}();return{data:r.data,handleDeleteProject:s,handleEditProject:i,handleAddProject:c,handleAddCollaborator:o,handleDeleteIssue:h,handleEditIssue:m,handleCreateIssue:u,handleAssignIssue:p,handleStartIssue:f,handleCloseIssue:x,handleIssueAttachmentRequest:O,handleRemoveIssueAttachment:g,addIssueAttachmentHandles:v}}();return Object(O.jsx)(H.Provider,{value:t,children:e.children})}var M=n(16),Y=["children","component"];var G=function(e){var t=e.children,n=e.component,r=Object(M.a)(e,Y),a=y(),s=n;return Object(O.jsx)(o.b,Object(b.a)(Object(b.a)({},r),{},{render:function(e){return a.user?t||Object(O.jsx)(s,Object(b.a)({},e)):Object(O.jsx)(o.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},X=n(308),Q=n(77),Z=["to","text"];var $=function(e){var t=e.to,n=e.text,r=Object(M.a)(e,Z);return Object(O.jsx)(Q.a,Object(b.a)(Object(b.a)({as:i.b,to:t||"#",variant:"outline-primary"},r),{},{children:n||r.children}))},ee=n(309),te=(n(178),["title","logo","render"]);var ne=function(e){var t=e.title,n=e.logo,r=e.render,a=Object(M.a)(e,te);return Object(O.jsxs)(ee.a,Object(b.a)(Object(b.a)({className:"NavBar"},a),{},{children:[Object(O.jsxs)(ee.a.Brand,{id:"brand",href:"/",children:[n?Object(O.jsx)("img",{alt:"",src:n,className:"logo"}):null,t]}),Object(O.jsx)(ee.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(O.jsx)(ee.a.Collapse,{id:"basic-navbar-nav",className:"justify-content-end",children:r()})]}))},re=n.p+"static/media/logo.103b5fa1.svg";var ae=function(e){var t=y(),n=function(){t.logout((function(){console.log("Logged out")}))};return Object(O.jsx)(ne,{title:"Issue Tracker",logo:re,bg:"dark",expand:"sm",render:function(){return Object(O.jsxs)(X.a,{children:[t.user?null:Object(O.jsx)($,{className:"m-sm-1",to:"login",children:"Login"}),t.user?null:Object(O.jsx)($,{className:"m-sm-1",to:"signup",children:"Signup"}),t.user?Object(O.jsx)($,{className:"m-sm-1",to:"/dashboard",children:"Dashboard"}):null,t.user?Object(O.jsx)($,{className:"m-sm-1",to:"/account",children:"Account"}):null,t.user?Object(O.jsx)($,{className:"m-sm-1",onClick:n,children:"Logout"}):null]})}})},se=n(302),ce=n(301),ie=n(145),oe=n(11),ue=n(141),le=(n(180),function(e){return Object(O.jsx)(ue.a,Object(b.a)(Object(b.a)({name:e.name,as:"textarea"===e.type?"textarea":"input"},e),{},{className:"form-input"}))});function de(e){return Object(O.jsxs)("span",{className:"text-input-container my-2",children:[Object(O.jsx)("label",{htmlFor:e.name,children:e.label}),Object(O.jsx)("span",{className:"form-error",children:Object(O.jsx)(oe.a,Object(b.a)({},e))}),Object(O.jsx)(oe.b,Object(b.a)(Object(b.a)({as:le},e),{},{className:"form-input"}))]})}var je=n(19),be=je.a().shape({firstName:je.c().min(3,"Too Short!").max(20,"Too Long!").required("Required"),lastName:je.c().min(3,"Too Short!").max(20,"Too Long!").required("Required"),userName:je.c().min(3,"Too Short!").max(20,"Too Long!").required("Required"),email:je.c().email("Invalid email").required("Required"),password:je.c().min(6,"Too Short!").max(20,"Too Long!").required("Required"),confirmPassword:je.c().oneOf([je.b("password"),""],"Passwords do not match")}),he=je.a().shape({userName:je.c().min(3,"Too Short!").max(20,"Too Long!").required("Required"),password:je.c().min(6,"Too Short!").max(20,"Too Long!").required("Required")}),me=je.a().shape({currentPassword:je.c().min(6,"Too Short!").max(20,"Too Long!").required("Required"),newPassword:je.c().min(6,"Too Short!").max(20,"Too Long!").required("Required"),confirmNewPassword:je.c().oneOf([je.b("newPassword"),null],"Passwords must match")}),pe=je.a().shape({name:je.c().min(3,"Too Short!").max(30,"Too Long!").required("Required"),description:je.c().min(3,"Too Short!").max(512,"Too Long!").required("Required")}),fe=je.a().shape({title:je.c().min(3,"Too Short!").max(30,"Too Long!").required("Required"),description:je.c().min(3,"Too Short!").max(512,"Too Long!").required("Required")}),xe=["onSubmit"];var Oe=function(e){var t=e.onSubmit,n=Object(M.a)(e,xe);return Object(O.jsx)(oe.d,{initialValues:{userName:"",password:""},validationSchema:he,onSubmit:function(){var e=Object(d.a)(l.a.mark((function e(n,r){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=r.setSubmitting)(!0),e.prev=2,e.next=5,t(n);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:a(!1);case 11:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting;return Object(O.jsxs)(oe.c,{className:"form",children:[Object(O.jsx)(ce.a,{as:"h3",className:"center-align heading",children:"Login"}),Object(O.jsx)(ce.a,{as:"h5",className:"left-align subheading",children:"Login to your account"}),Object(O.jsx)(ce.a,{as:"p",className:"left-align message",children:"Welcome! You must log in to your account to view and manage your projects with [insert issue tracker name here]!"}),Object(O.jsx)(ce.a,{className:"mx-4",children:Object(O.jsx)(de,{name:"userName",type:"text",label:"Username"})}),Object(O.jsx)(ce.a,{className:"mx-4",children:Object(O.jsx)(de,{name:"password",type:"password",label:"Password"})}),n.error&&Object(O.jsx)("div",{className:"form-error",children:n.error.message}),Object(O.jsx)(ce.a,{className:"my-3",children:Object(O.jsx)(Q.a,{variant:"primary",type:"submit",disabled:t,children:"Login"})}),Object(O.jsxs)(ce.a,{as:"p",className:"center-align message",children:["Don't have an account yet? Please ",Object(O.jsx)(i.b,{to:"signup",children:"\xa0Sign up\xa0"})," to continue."]})]})}})};n(105);var ve=function(e){var t=y(),n=e.location.state?e.location.state.from:null;return t.isLoading?Object(O.jsx)("div",{children:"Loading..."}):t.user?Object(O.jsx)(o.a,{to:n?n.pathname:"/"}):Object(O.jsx)(se.a,{fluid:!0,className:"page",children:Object(O.jsx)(ce.a,{className:"form-container",children:Object(O.jsx)(ie.a,{xs:12,sm:8,md:6,lg:5,children:Object(O.jsx)(Oe,{onSubmit:function(e){return t.login(e,(function(e){console.log("Signed in as "+e.userName+"!")}))},error:t.error})})})})};n(279);var ge=function(e){return Object(O.jsx)(oe.d,{initialValues:{firstName:"",lastName:"",email:"",userName:"",password:"",confirmPassword:""},validationSchema:be,onSubmit:function(){var t=Object(d.a)(l.a.mark((function t(n,r){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.setSubmitting(!0),t.prev=1,t.next=4,e.onSubmit(n);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),console.log(t.t0);case 9:r.setSubmitting(!1);case 10:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e,n){return t.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting;return Object(O.jsxs)(oe.c,{className:"form",autoComplete:"false",children:[Object(O.jsx)(ce.a,{as:"h3",lg:1,className:"center-align heading",children:"Sign Up"}),Object(O.jsx)(ce.a,{as:"h5",className:"left-align subheading",children:"Sign up for an account"}),Object(O.jsx)(ce.a,{as:"p",className:"left-align message",children:"Sign up today and you can begin keeping track of all tasks and issues related to your projects with [insert issue tracker name here]!"}),Object(O.jsxs)(ce.a,{className:"mx-4",children:[Object(O.jsx)(ie.a,{xs:12,md:6,children:Object(O.jsx)(de,{name:"firstName",type:"text",label:"First name"})}),Object(O.jsx)(ie.a,{xs:12,md:6,children:Object(O.jsx)(de,{name:"lastName",type:"text",label:"Last name"})})]}),Object(O.jsxs)(ce.a,{className:"mx-4",children:[Object(O.jsx)(ie.a,{xs:12,md:6,children:Object(O.jsx)(de,{name:"userName",type:"text",label:"User name"})}),Object(O.jsx)(ie.a,{xs:12,md:6,children:Object(O.jsx)(de,{name:"email",type:"text",label:"Email"})})]}),Object(O.jsxs)(ce.a,{className:"mx-4",children:[Object(O.jsx)(ie.a,{xs:12,md:6,children:Object(O.jsx)(de,{name:"password",type:"password",label:"Password"})}),Object(O.jsx)(ie.a,{xs:12,md:6,children:Object(O.jsx)(de,{name:"confirmPassword",type:"password",label:"Confirm Password"})})]}),Object(O.jsx)(ce.a,{className:"my-3",children:Object(O.jsx)(Q.a,{variant:"primary",type:"submit",disabled:t,children:"Sign up"})}),Object(O.jsxs)(ce.a,{as:"p",className:"center-align message",children:["Already have an account? Please ",Object(O.jsx)(i.b,{to:"login",children:"\xa0Log in\xa0"})," to continue."]})]})}})};var ye=function(){var e=y(),t=Object(r.useState)(!1),n=Object(j.a)(t,2),a=n[0],s=n[1],c=function(){var t=Object(d.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.signup(n,(function(e){console.log(e)}));case 2:s(!0);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return e.isLoading?Object(O.jsx)("div",{children:"Loading..."}):e.user||a?Object(O.jsx)(o.a,{to:"/"}):Object(O.jsx)(se.a,{fluid:!0,className:"page",children:Object(O.jsx)(ce.a,{className:"form-container",children:Object(O.jsx)(ie.a,{xs:12,sm:10,md:8,xl:6,children:Object(O.jsx)(ge,{onSubmit:c})})})})};n(280);var we=function(){return Object(O.jsxs)(se.a,{className:"tile-container",children:[Object(O.jsx)($,{to:"/projects",className:"tile",children:"Projects&Issues"}),Object(O.jsx)(Q.a,{className:"tile",children:"Reports (Coming Soon)"})]})};var ke=function(){return Object(O.jsx)(ne,{title:"Projects",bg:"light",render:function(){return Object(O.jsx)(X.a,{children:Object(O.jsx)($,{to:"/projects/new",className:"m-sm-1",children:"Add New Project"})})}})};var Ne=function(e){var t=e.item,n=e.render;return Object(O.jsx)("div",{className:"list-item",children:n(t)})};var Ie=function(e){var t=e.name,n=e.value,a=e.items,s=e.render,c=Object(r.useState)(!1),i=Object(j.a)(c,2),o=i[0],u=i[1];return Object(O.jsxs)("div",{className:"list-item-group "+t,children:[Object(O.jsx)("div",{className:"group-header "+(o?"collapsed":""),onClick:function(){return u((function(e){return!e}))},children:n}),o?null:a&&a.length>0?a.map((function(e,t){return Object(O.jsx)(Ne,{item:e,render:s},"".concat(n,"-").concat(t))})):Object(O.jsx)("div",{className:"empty-group-message",children:"There are no items to display for this group"})]})},Se=(n(281),n(33)),Ce=n(51);var Ae=function(e){var t=e.listItems,n=e.groupKey,r=void 0===n?null:n,a=e.groupValues,s=void 0===a?null:a,c=e.orderBy,i=void 0===c?"asc":c,o=e.filter,u=void 0===o?null:o,l=e.searchText,d=void 0===l?"":l,j=e.searchKeys,b=void 0===j?[]:j,h=e.render,m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(!t)return e;var a=Object(Ce.mapValues)(t,(function(e){var t=Object(Ce.pickBy)(e,(function(e){return!0===e}));return Object.keys(t)}));return e&&e.length>0&&e.filter((function(e){for(var t=!0,s=0,c=Object.keys(a);s<c.length;s++){var i=c[s];!1===Object(Ce.includes)(a[i],e[i])&&(t=!1)}if(t&&""!==n){var o,u=Object(Se.a)(r);try{for(u.s();!(o=u.n()).done;){var l=o.value;if(!0===Object(Ce.includes)(e[l].toLowerCase(),n.toLowerCase())){t=!0;break}t=!1}}catch(d){u.e(d)}finally{u.f()}}return t}))||e}(t,u,d,b),p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?Object(Ce.groupBy)(e,(function(e){return e[t]})):e}(m,r);return Object(O.jsx)("div",{className:"list-container",children:function(){var e;if(r&&s){var t=[];s.forEach((function(e){var n=p[e];t.push(Object(O.jsx)(Ie,{name:r,value:e,items:n,render:h},"".concat(r,"=").concat(e)))})),e="desc"===i?t.reverse():t}else e=m&&m.map((function(e,t){return Object(O.jsx)(Ne,{item:e,keyValue:t,render:h},t)}));return e}()})},Te=n(310),Pe=n(303);var De=function(e){var t=e.project,n=e.onDelete,r=e.onAddCollaborator;return Object(O.jsxs)(Te.a,{className:"project-list-card",children:[Object(O.jsx)(Te.a.Body,{className:"left-side",children:Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{className:"my-1",xs:12,sm:6,xl:6,children:Object(O.jsx)(Te.a.Title,{children:t.name})}),Object(O.jsxs)(ie.a,{className:"my-1",sm:6,xl:6,children:[Object(O.jsx)($,{size:"sm",className:"",to:"/projects/".concat(t.id),children:"Details"}),Object(O.jsx)(Q.a,{size:"sm",className:"m-1",onClick:function(){return n({projectId:t.id})},children:"Delete"})]}),Object(O.jsx)(ie.a,{className:"my-1",xs:12,xl:12,children:Object(O.jsx)(Te.a.Text,{children:t.description})})]})}),Object(O.jsx)(Te.a.Body,{className:"right-side",children:Object(O.jsxs)(ce.a,{children:[Object(O.jsxs)(ie.a,{xs:12,xl:3,className:"content-group",children:[Object(O.jsx)(Te.a.Title,{className:"content-group-title",children:"Collaborators"}),Object(O.jsxs)(Pe.a,{className:"buttons mx-2",children:[Object(O.jsx)($,{size:"sm",children:"View"}),Object(O.jsx)(Q.a,{variant:"primary",size:"sm",onClick:function(){return r({projectId:t.id})},children:"Add"})]}),Object(O.jsx)(Te.a.Text,{children:"There are "+t.totalCollaborators+" collaborators"})]}),Object(O.jsxs)(ie.a,{sm:12,xl:4,className:"content-group",children:[Object(O.jsx)(Te.a.Title,{className:"content-group-title",children:"Your Issues"}),Object(O.jsx)($,{className:"mx-2",size:"sm",children:"View My Issues"}),Object(O.jsx)(Te.a.Text,{children:"You have "+t.totalAssignedIssues+" issues assigned to you"})]}),Object(O.jsxs)(ie.a,{sm:12,xl:5,className:"content-group",children:[Object(O.jsx)(Te.a.Title,{className:"content-group-title",children:"All Issues"}),Object(O.jsxs)(Pe.a,{className:"buttons mx-2",children:[Object(O.jsx)($,{variant:"outline-primary",to:"/projects/".concat(t.id,"/issues"),size:"sm",children:"View Issues"}),Object(O.jsx)($,{variant:"primary",to:"/projects/".concat(t.id,"/issues/new"),size:"sm",children:"Create Issue"})]}),Object(O.jsx)(Te.a.Text,{children:"There are "+t.issues.length+" issues related to this project"})]})]})})]})},Ee=(n(282),["projectList"]);var Be=function(e){var t=e.projectList,n=Object(M.a)(e,Ee);return t?Object(O.jsx)(Ae,{listItems:t,render:function(e){return Object(O.jsx)(De,Object(b.a)({project:e},n))}}):"No projects"};var Le=function(e){var t=e.onSubmit;return Object(O.jsx)(oe.d,{initialValues:{name:"",description:""},validationSchema:pe,onSubmit:function(){var e=Object(d.a)(l.a.mark((function e(n,r){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=r.setSubmitting)(!0),e.prev=2,e.next=5,t(n);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:a(!1);case 11:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting;return Object(O.jsxs)(oe.c,{className:"form",children:[Object(O.jsx)(ce.a,{as:"h3",children:"Create New Project"}),Object(O.jsx)(de,{name:"name",type:"text",label:"Project name"}),Object(O.jsx)(de,{name:"description",type:"textarea",label:"Project description"}),Object(O.jsx)(ce.a,{className:"my-4",children:Object(O.jsx)(Q.a,{variant:"primary",type:"submit",disabled:t,children:"Create Project"})})]})}})},Fe=Object(r.createContext)({});function Re(e){var t=function(){var e=Object(r.useState)("Notification Banner"),t=Object(j.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(!1),c=Object(j.a)(s,2),i=c[0],o=c[1];return{text:n,show:i,showNotificationWithText:function(e){a(e),o(!0),setTimeout((function(){o(!1),a("")}),5e3)}}}();return Object(O.jsx)(Fe.Provider,{value:t,children:e.children})}function qe(){return Object(r.useContext)(Fe)}var Ke=function(e){y();var t=qe(),n=Object(r.useState)(!1),a=Object(j.a)(n,2),s=a[0],c=a[1],i=function(){var n=Object(d.a)(l.a.mark((function n(r){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.onSubmit(r);case 3:t.showNotificationWithText("Project successfully created!"),c(!0),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),t.showNotificationWithText(n.t0.message);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}();return!0===s?Object(O.jsx)(o.a,{to:"/projects"}):Object(O.jsx)(se.a,{fluid:!0,className:"page",children:Object(O.jsx)(ce.a,{className:"form-container",children:Object(O.jsx)(ie.a,{xs:12,sm:8,md:5,xl:4,children:Object(O.jsx)(Le,{onSubmit:i})})})})},Ue=n(311);n(283);var Ve=function(e){var t=e.name,n=e.disabled,a=e.onFilesAdded,s=Object(r.useState)(!1),c=Object(j.a)(s,2),i=c[0],o=c[1],u=Object(r.useRef)(null),l=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e.item(n));return t};return Object(O.jsxs)("div",{className:"dropzone ".concat(i?"highlight":""),onDragOver:function(e){e.preventDefault(),o(!0)},onDragLeave:function(){o(!1)},onDrop:function(e){if(e.preventDefault(),!n){var t=e.dataTransfer.files;if(a){var r=l(t);a(r)}o(!1)}},onClick:function(){n||u.current.click()},style:{cursor:n?"default":"pointer"},children:[Object(O.jsx)("input",{ref:u,name:t,className:"file-input",type:"file",multiple:!0,onChange:function(e){if(!n){var t=e.target.files;if(a){var r=l(t);a(r)}}}}),Object(O.jsx)("img",{alt:"upload",className:"icon",src:"/upload_file_black_24dp.svg"}),Object(O.jsx)("span",{children:"Upload Files"})]})},We=(n(284),["onChange","sendRequest","onClose","setUploadCallbacks"]),_e={files:[],isUploading:!1,progress:{},successful:!1};var ze=function(e){var t=e.onChange,n=e.sendRequest,a=e.onClose,s=e.setUploadCallbacks,c=Object(M.a)(e,We),i=Object(r.useState)(_e),o=Object(j.a)(i,2),u=o[0],h=o[1];Object(r.useEffect)((function(){s&&s((function(){return p}))}),[s]);var m=function(){var e=Object(d.a)(l.a.mark((function e(){var t,r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h((function(e){return Object(b.a)(Object(b.a)({},e),{},{progress:{},isUploading:!0})})),t=[],console.log(u),u.files&&u.files.forEach((function(e){console.log("sending request from upload"),r=p(e);var a=new FormData;a.append("attachments",e),t.push(n(a,r.progressCb))})),e.prev=4,e.next=7,Promise.all(t).then((function(e){return e.map((function(e){return e.data.id}))})).then((function(e){return r.successCb(),e})).catch((function(e){return r.failureCb(e)}));case 7:a=e.sent,c.onComplete(a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),r.failureCb(e.t0);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(){return e.apply(this,arguments)}}(),p=function(e){return h((function(e){return Object(b.a)(Object(b.a)({},e),{},{progress:{},isUploading:!0})})),{progressCb:function(t){t&&100!==t?(console.log("isuploading"),h((function(n){var r=Object(b.a)({},n.progress);return r[e.name]={state:"pending",percentage:t},Object(b.a)(Object(b.a)({},n),{},{progress:r})}))):t&&(console.log("issuccessful"),h((function(n){var r=Object(b.a)({},n.progress);return r[e.name]={state:"done",percentage:t},Object(b.a)(Object(b.a)({},n),{},{progress:r})})))},successCb:function(){console.log("calling success"),h((function(e){return Object(b.a)(Object(b.a)({},e),{},{successful:!0,uploading:!1})}))},failureCb:function(e){console.log("calling failure",e),h((function(e){return Object(b.a)(Object(b.a)({},e),{},{successful:!1,uploading:!1})}))}}},f=function(e){var t=u.progress&&u.progress[e.name];if(u.isUploading||u.successful)return Object(O.jsxs)("div",{className:"progress-wrapper",children:[Object(O.jsx)(Ue.a,{now:t?t.percentage:0}),Object(O.jsx)("img",{className:"successful-icon",alt:"successful",src:"/file_download_done_black_24dp.svg",style:{opacity:t&&"done"===t.state?.5:0}})]})};return Object(O.jsxs)("div",{className:"upload",children:[Object(O.jsxs)("div",{className:"header",children:[Object(O.jsx)("span",{className:"title",children:"Upload Files"}),a&&Object(O.jsx)("button",{className:"close-upload link",onClick:function(){return a()},children:"X"})]}),Object(O.jsxs)("div",{className:"content",children:[Object(O.jsx)("div",{children:Object(O.jsx)(Ve,{name:c.name,onFilesAdded:function(e){h((function(n){var r=n.files.concat(e);return t&&t(r),Object(b.a)(Object(b.a)({},n),{},{files:r})}))},disabled:u.isUploading||u.successful})}),Object(O.jsx)("div",{className:"files",children:u.files&&u.files.map((function(e,t){return Object(O.jsxs)("div",{className:"file-progress",children:[Object(O.jsx)("span",{className:"filename",children:e.name}),f(e)," ",Object(O.jsx)("button",{className:"remove-attachment link",onClick:function(){return e=t,void h((function(t){console.log("removing file:",e);var n=t.files.slice();return n.splice(e,1),Object(b.a)(Object(b.a)({},t),{},{files:n})}));var e},style:{display:u.isUploading||u.successful?"none":"inline"},children:"X"})]},"file.name-".concat(t))}))})]}),Object(O.jsx)("div",{className:"actions",children:n?u.successful?Object(O.jsx)(Q.a,{onClick:function(){return h(_e)},children:"Clear"}):Object(O.jsx)(Q.a,{disabled:!u.files||u.files.length<0||u.isUploading,onClick:m,children:"Upload"}):null})]})};n(285);function He(e){return Object(O.jsxs)("span",{className:"input-container my-2",children:[Object(O.jsx)("label",{htmlFor:e.name,children:e.label}),Object(O.jsx)("span",{className:"form-error",children:Object(O.jsx)(oe.a,Object(b.a)({},e))}),Object(O.jsx)(oe.b,Object(b.a)(Object(b.a)({as:"select"},e),{},{className:"form-input",children:e.children}))]})}var Je=function(e){var t=e.onSubmit,n=e.collaborators,a=Object(r.useState)({progressCb:function(e){console.log(e)},successCb:function(){console.log("Successful upload")},failureCb:function(){console.log("Failed upload")}}),s=Object(j.a)(a,2),c=s[0],i=s[1];return Object(O.jsx)(oe.d,{initialValues:{title:"",description:"",category:"other",priority:"regular",status:"unassigned",assigneeId:""},validationSchema:fe,onSubmit:function(){var e=Object(d.a)(l.a.mark((function e(n,r){var a,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=r.setSubmitting)(!0),e.prev=2,s=n,e.next=6,t(s,c);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0);case 11:a(!1);case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,r=e.setFieldValue,a=e.submitForm,s=e.resetForm;return Object(O.jsxs)(oe.c,{className:"form",id:"new-issue-form",children:[Object(O.jsx)(ce.a,{as:"h3",children:"Add New Issue"}),Object(O.jsx)(de,{name:"title",type:"text",label:"Issue Title"}),Object(O.jsx)(de,{name:"description",type:"textarea",label:"Description"}),Object(O.jsxs)(He,{name:"category",label:"Category",children:[Object(O.jsx)("option",{value:"bug",children:"Bug"}),Object(O.jsx)("option",{value:"feature",children:"Feature"}),Object(O.jsx)("option",{value:"task",children:"Task"}),Object(O.jsx)("option",{value:"other",children:"Uncategorized"})]}),Object(O.jsxs)(He,{name:"priority",label:"Priority",children:[Object(O.jsx)("option",{value:"trivial",children:"Trivial"}),Object(O.jsx)("option",{value:"low",children:"Low"}),Object(O.jsx)("option",{value:"regular",children:"Regular"}),Object(O.jsx)("option",{value:"high",children:"High"}),Object(O.jsx)("option",{value:"critical",children:"Critical"})]}),Object(O.jsxs)(ce.a,{className:"input-container",children:[Object(O.jsx)("label",{htmlFor:"attachments",children:"Attachments"}),Object(O.jsx)(ie.a,{xl:6,children:Object(O.jsx)(oe.b,{name:"attachments",as:ze,onChange:function(e){return r("attachments",e)},setUploadCallbacks:i,className:"form-input"})})]}),Object(O.jsxs)(He,{name:"assign",label:"Assign",children:[Object(O.jsx)("option",{value:"",children:"Unassigned"}),n.map((function(e){return Object(O.jsx)("option",{value:e.id,children:e.userName},e.id)}))]}),Object(O.jsx)(oe.b,{name:"createAnother",type:"checkbox",style:{display:"none"}}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(Q.a,{variant:"primary",type:"submit",disabled:t,children:"Add Issue"}),Object(O.jsx)(Q.a,{variant:"outline-primary",className:"mx-1",disabled:t,onClick:Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r("createAnother",!0),e.next=3,a();case 3:s();case 4:case"end":return e.stop()}}),e)}))),children:"Add And Create Another"})]})]})}})};var Me=function(e){var t=y(),n=qe(),a=w("/api/projects/".concat(e.match.params.projectId,"/collaborators"),t.user?t.user.token:null),s=Object(j.a)(a,2),c=s[0],i=(s[1],Object(r.useState)(!1)),u=Object(j.a)(i,2),b=u[0],h=u[1],m=function(){var t=Object(d.a)(l.a.mark((function t(n,r,a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("in new issue page"),t.abrupt("return",e.onCreateAttachmentRequest(e.match.params.projectId,n,r,a));case 2:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),p=function(){var t=Object(d.a)(l.a.mark((function t(r,a){var s,c,i,o,u,d;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s=r.attachments,delete r.attachments,c=r.createAnother,delete r.createAnother,t.next=7,e.onSubmit(e.match.params.projectId,r);case 7:return i=t.sent,o=a(null),u=[],s&&s.forEach((function(e){o=a(e);var t=new FormData;t.append("attachments",e),u.push(m(i.id,t,o.progressCb))})),t.next=13,Promise.all(u).then((function(e){return e.map((function(e){return e.data.id}))})).then((function(e){return o.successCb(),e})).catch((function(e){return o.failureCb(e)}));case 13:d=t.sent,e.onAddAttachment(e.match.params.projectId,i.id,d),n.showNotificationWithText("Issue successfully added!"),h(!c),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(0),n.showNotificationWithText(t.t0.message);case 22:case"end":return t.stop()}}),t,null,[[0,19]])})));return function(e,n){return t.apply(this,arguments)}}();return!0===b?Object(O.jsx)(o.a,{to:"/projects/".concat(e.match.params.projectId,"/issues")}):Object(O.jsx)(se.a,{fluid:!0,className:"page",children:Object(O.jsx)(ce.a,{className:"form-container",children:Object(O.jsx)(ie.a,{xs:12,sm:6,children:Object(O.jsx)(Je,{onSubmit:p,collaborators:c.data})})})})};var Ye=function(e){var t=e.render;return Object(O.jsx)(ne,{title:"Issues",bg:"light",expand:"lg",render:function(){return Object(O.jsxs)(X.a,{children:[t(),Object(O.jsx)($,{to:"issues/new",variant:"outline-secondary",className:"m-sm-1",children:"Add New Issue"})]})}})},Ge=n(304),Xe=n(305),Qe=n(146),Ze=function(e){var t=e.projectId,n=e.issue,r=e.onDelete,a=e.onAssign,s=e.onStart,c=e.onClose;return Object(O.jsx)(Ge.a,{className:"issue-list-button-toolbar",children:Object(O.jsxs)(Pe.a,{className:"issue-list-button-group",children:[Object(O.jsx)($,{variant:"primary",to:"/projects/".concat(t,"/issues/").concat(n.id),size:"sm",children:"View"}),Object(O.jsx)(Q.a,{variant:"primary",size:"sm",onClick:function(e){return"unassigned"===n.status?a({projectId:t,issueId:n.id}):"open"===n.status?s({projectId:t,issueId:n.id}):"inprogress"===n.status?c({projectId:t,issueId:n.id}):void 0},disabled:"resolved"===n.status||"closed"===n.status,children:"unassigned"===n.status?"Assign":"open"===n.status||"inprogress"===n.status?"Advance":"resolved"===n.status?"Resolved":"Closed"}),Object(O.jsxs)(Xe.a,{as:Pe.a,variant:"secondary",size:"sm",title:"Settings",children:[Object(O.jsx)(Qe.a.Item,{children:"Edit Issue"}),Object(O.jsx)(Qe.a.Item,{onClick:function(){return r({projectId:t,issueId:n.id})},children:"Delete Issue"})]})]})})},$e=["projectId","issue"];var et=function(e){var t=e.projectId,n=e.issue,r=Object(M.a)(e,$e);return Object(O.jsx)(Te.a,{className:"issue-list-card-container",children:Object(O.jsx)(Te.a.Body,{className:"issue-list-card-body",children:Object(O.jsxs)(ce.a,{className:"issue-list-row",children:[Object(O.jsx)(ie.a,{sm:5,xl:2,children:Object(O.jsx)(Te.a.Title,{children:n.title})}),Object(O.jsx)(ie.a,{sm:7,xl:3,children:Object(O.jsx)(Te.a.Text,{children:n.description.slice(0,64)+" ..."})}),Object(O.jsxs)(ie.a,{xs:6,sm:2,xl:1,className:"py-2",children:[Object(O.jsx)(Te.a.Subtitle,{children:"Category"}),Object(O.jsx)(Te.a.Text,{children:n.category})]}),Object(O.jsxs)(ie.a,{xs:6,sm:2,xl:1,className:"py-2",children:[Object(O.jsx)(Te.a.Subtitle,{children:"Priority"}),Object(O.jsx)(Te.a.Text,{children:n.priority})]}),Object(O.jsxs)(ie.a,{xs:6,sm:2,xl:1,className:"py-2",children:[Object(O.jsx)(Te.a.Subtitle,{children:"Status"}),Object(O.jsx)(Te.a.Text,{children:n.status})]}),Object(O.jsxs)(ie.a,{xs:6,sm:2,xl:1,className:"py-2",children:[Object(O.jsx)(Te.a.Subtitle,{children:"Assigned"}),Object(O.jsx)(Te.a.Text,{children:n.assignee?n.assignee:"None"})]}),Object(O.jsx)(ie.a,{xs:12,sm:4,xl:1,className:"py-2",children:Object(O.jsx)(Ze,Object(b.a)({projectId:t,issue:n},r))})]})})})},tt=(n(287),["projectId","issueList","groupBy","orderBy","filter","searchText","searchKeys"]),nt={priority:["trivial","low","regular","high","critical"],category:["other","task","feature","bug"],status:["closed","resolved","inprogresss","open","unassigned"]};var rt=function(e){var t=e.projectId,n=e.issueList,r=e.groupBy,a=e.orderBy,s=e.filter,c=e.searchText,i=e.searchKeys,o=Object(M.a)(e,tt);return n&&n.length>0?Object(O.jsx)(Ae,{listItems:n,groupKey:r,groupValues:nt[r],orderBy:a,filter:s,searchText:c,searchKeys:i,render:function(e){return Object(O.jsx)(et,Object(b.a)({projectId:t,issue:e},o))}}):Object(O.jsxs)("div",{className:"empty-list-message",children:[Object(O.jsx)("span",{children:"There are currently no issues to display for this project. "}),Object(O.jsx)("a",{href:"issues/new",children:"Click here "}),Object(O.jsx)("span",{children:"to create an issue."})]})},at=n(43);n(288);function st(e){var t=e.checked,n=e.name,r=e.id,a=e.onClick;return Object(O.jsx)("div",{className:"checkmark",id:r,name:n,onClick:a,children:t?"\u2713":""})}var ct=function(e){var t=Object(r.useState)(!1),n=Object(j.a)(t,2),a=n[0],s=n[1],c=function(t,n){var r=Object.keys(e.filters),a=Object(b.a)({},e.filters);""===t?r.forEach((function(t){Object.keys(e.filters[t]).forEach((function(e){a[t][e]=n}))})):Object.keys(e.filters[t]).forEach((function(e){a[t][e]=n})),e.onSelect("filter",a)},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";c(e,!0)},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";c(e,!1)},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=Object(b.a)({},e.filters),r=!0;if(""===t){var a=Object.keys(e.filters);a.forEach((function(t){Object.keys(e.filters[t]).forEach((function(e){!0===n[t][e]&&(r=!1)}))}))}else Object.keys(e.filters[t]).forEach((function(e){!0===n[t][e]&&(r=!1)}));return r},l=function(e){u(e)?i(e):o(e)};return Object(O.jsxs)(Pe.a,{className:e.className,children:[Object(O.jsxs)(Xe.a,{className:"m-1",variant:"outline-primary",title:"Group by",onSelect:function(t){e.onSelect("group",t)},children:[Object(O.jsx)(Qe.a.Item,{eventKey:"none",children:"None"}),Object(O.jsx)(Qe.a.Item,{eventKey:"category",children:"Category"}),Object(O.jsx)(Qe.a.Item,{eventKey:"status",children:"Status"}),Object(O.jsx)(Qe.a.Item,{eventKey:"priority",children:"Priority"})]}),Object(O.jsxs)(Xe.a,{className:"m-1",variant:"outline-primary",title:"Order",onSelect:function(t){e.onSelect("order",t)},children:[Object(O.jsx)(Qe.a.Item,{eventKey:"asc",children:"Ascending"}),Object(O.jsx)(Qe.a.Item,{eventKey:"desc",children:"Desccending"})]}),Object(O.jsx)(Xe.a,{show:a,className:"filterDropdown m-1",variant:"outline-primary",title:"Filter",menuAlign:"right",onSelect:function(t){var n=t.split(" "),r=Object(j.a)(n,2),a=r[0],s=r[1],c=Object(b.a)({},e.filters[a]);c[s]=!c[s];var i=Object(b.a)(Object(b.a)({},e.filters),{},Object(at.a)({},a,c));e.onSelect("filter",i)},onToggle:function(e,t,n){"select"!==n.source&&s(e)},children:Object(O.jsxs)("div",{className:"filters",children:[Object(O.jsxs)("div",{className:"dropdown-item-group",children:[Object(O.jsx)(Qe.a.Header,{children:"Category"}),Object(O.jsxs)(Qe.a.Item,{eventKey:"category bug",children:[Object(O.jsx)(st,{name:"bug",id:"checkbox-bug",checked:e.filters.category.bug}),Object(O.jsx)("label",{htmlFor:"checkbox-bug",children:"Bug"})]}),Object(O.jsxs)(Qe.a.Item,{eventKey:"category feature",children:[Object(O.jsx)(st,{name:"feature",id:"checkbox-feature",checked:e.filters.category.feature}),Object(O.jsx)("label",{htmlFor:"checkbox-feature",children:"Feature"})]}),Object(O.jsxs)(Qe.a.Item,{eventKey:"category task",children:[Object(O.jsx)(st,{name:"task",id:"checkbox-task",checked:e.filters.category.task}),Object(O.jsx)("label",{htmlFor:"checkbox-task",children:"Task"})]}),Object(O.jsxs)(Qe.a.Item,{eventKey:"category other",children:[Object(O.jsx)(st,{name:"other",id:"checkbox-other",checked:e.filters.category.other}),Object(O.jsx)("label",{htmlFor:"checkbox-other",children:"Other"})]}),Object(O.jsx)(Qe.a.ItemText,{onClick:function(){l("category")},children:u()?"All":"Clear"})]}),Object(O.jsxs)("div",{className:"dropdown-item-group",children:[Object(O.jsx)(Qe.a.Header,{children:"Priority"}),Object(O.jsxs)(Qe.a.Item,{eventKey:"priority critical",children:[Object(O.jsx)(st,{name:"critical",id:"checkbox-critical",checked:e.filters.priority.critical}),Object(O.jsx)("label",{htmlFor:"checkbox-critical",children:"Critical"})]}),Object(O.jsxs)(Qe.a.Item,{eventKey:"priority high",children:[Object(O.jsx)(st,{name:"high",id:"checkbox-high",checked:e.filters.priority.high}),Object(O.jsx)("label",{htmlFor:"checkbox-high",children:"High"})]}),Object(O.jsxs)(Qe.a.Item,{eventKey:"priority regular",children:[Object(O.jsx)(st,{name:"regular",id:"checkbox-regular",checked:e.filters.priority.regular}),Object(O.jsx)("label",{htmlFor:"checkbox-regular",children:"Regular"})]}),Object(O.jsxs)(Qe.a.Item,{eventKey:"priority low",children:[Object(O.jsx)(st,{name:"low",id:"checkbox-low",checked:e.filters.priority.low}),Object(O.jsx)("label",{htmlFor:"checkbox-low",children:"Low"})]}),Object(O.jsxs)(Qe.a.Item,{eventKey:"priority trivial",children:[Object(O.jsx)(st,{name:"trivial",id:"checkbox-trivial",checked:e.filters.priority.trivial}),Object(O.jsx)("label",{htmlFor:"checkbox-trivial",children:"Trivial"})]}),Object(O.jsx)(Qe.a.ItemText,{onClick:function(){l("priority")},children:u()?"All":"Clear"})]}),Object(O.jsxs)("div",{className:"dropdown-item-group",children:[Object(O.jsx)(Qe.a.Header,{children:"Status"}),Object(O.jsxs)(Qe.a.Item,{eventKey:"status unassigned",children:[Object(O.jsx)(st,{name:"unassigned",id:"checkbox-unassigned",checked:e.filters.status.unassigned}),Object(O.jsx)("label",{htmlFor:"checkbox-unassigned",children:"Unassigned"})]}),Object(O.jsxs)(Qe.a.Item,{eventKey:"status open",children:[Object(O.jsx)(st,{name:"open",id:"checkbox-open",checked:e.filters.status.open}),Object(O.jsx)("label",{htmlFor:"checkbox-open",children:"Open"})]}),Object(O.jsxs)(Qe.a.Item,{eventKey:"status inprogress",children:[Object(O.jsx)(st,{name:"inprogress",id:"checkbox-inprogress",checked:e.filters.status.inprogress}),Object(O.jsx)("label",{htmlFor:"checkbox-inprogress",children:"In-progress"})]}),Object(O.jsxs)(Qe.a.Item,{eventKey:"status resolved",children:[Object(O.jsx)(st,{name:"resolved",id:"checkbox-resolved",checked:e.filters.status.resolved}),Object(O.jsx)("label",{htmlFor:"checkbox-resolved",children:"Resolved"})]}),Object(O.jsxs)(Qe.a.Item,{eventKey:"status closed",children:[Object(O.jsx)(st,{name:"closed",id:"checkbox-closed",checked:e.filters.status.closed}),Object(O.jsx)("label",{htmlFor:"checkbox-closed",children:"Closed"})]}),Object(O.jsx)(Qe.a.ItemText,{onClick:function(){l("status")},children:u()?"All":"Clear"})]}),Object(O.jsx)(Qe.a.ItemText,{onClick:function(){u()?i():o()},children:u()?"Check All":"Clear All"})]})})]})},it=n(307),ot=(n(289),["onEdit","name","isEditing"]),ut=function(e,t){return function(n){var a=n.onEdit,s=n.name,c=n.isEditing,i=void 0!==c&&c,o=Object(M.a)(n,ot),u=Object(r.useState)(i),l=Object(j.a)(u,2),d=l[0],h=l[1],m=Object(r.useState)(o.value),p=Object(j.a)(m,2),f=p[0],x=p[1],v=Object(r.useRef)();Object(r.useEffect)((function(){v&&v.current&&v.current.focus()}),[d,i]);var g=function(e){"Enter"===e.key&&w(e)},y=function(e){x(e.target.value)},w=function(e){e.preventDefault(),a(Object(at.a)({},v.current.name,f)),h(!1)};return d?Object(O.jsx)(ie.a,{xs:o.xs,sm:o.sm,md:o.md,lg:o.lg,children:Object(O.jsx)("form",{onBlur:function(){o.onBlur&&o.onBlur()||h(!1)},onSubmit:w,children:"text"===t?Object(O.jsx)("input",{ref:v,name:s,type:t,defaultValue:f,onChange:y}):"textarea"===t?Object(O.jsx)("textarea",{ref:v,name:s,defaultValue:f,rows:5,cols:75,onChange:y,onKeyPress:g}):"select"===t?Object(O.jsx)("select",{ref:v,name:s,defaultValue:f,onChange:y,onKeyPress:g,children:o.options&&o.options.map((function(e,t){return Object(O.jsx)("option",{value:e,children:e},t)}))}):null})}):Object(O.jsx)("div",{className:"component-wrapper",children:Object(O.jsx)(e,Object(b.a)(Object(b.a)({},o),{},{onClick:function(){i||h(!0)},children:o.children}))})}},lt=function(e){var t=function(e,t,n){for(var r=0,a=0;r<n&&a>=0;)a=e.indexOf(t,a+1),r++;return a}(e," ",5);return e.slice(0,t)},dt=n.p+"static/media/edit-icon-png-small.4aeb2e4d.png",jt={width:"50vw",height:"100%",margin:"1em"},bt=a.a.forwardRef((function(e,t){var n=e.onClick;return Object(O.jsx)("img",{alt:"",src:dt,width:"25",height:"25",ref:t,onClick:n})}));var ht=function(e){var t=Object(r.useState)(null),n=Object(j.a)(t,2),a=n[0],s=n[1],c=ut(ie.a,"textarea"),i=function(e){s(e)},o=function(t){e.onEdit(a,t),s(null)};return Object(O.jsx)(Ae,{listItems:e.comments,render:function(t){return Object(O.jsxs)(ce.a,{style:jt,children:[Object(O.jsx)(ie.a,{lg:11,md:11,sm:10,xs:9,children:"Posted By: "+t.creator+" on "+lt(new Date(t.created_at).toString())}),Object(O.jsx)(ie.a,{lg:1,md:1,sm:2,xs:3,children:Object(O.jsxs)(Qe.a,{onSelect:function(n){return r=n,a=t.id,"delete"===r?e.onDelete({commentId:a}):"edit"===r?i(a):void 0;var r,a},children:[Object(O.jsx)(Qe.a.Toggle,{as:bt}),Object(O.jsxs)(Qe.a.Menu,{children:[Object(O.jsx)(Qe.a.Item,{eventKey:"edit",children:"Edit"}),Object(O.jsx)(Qe.a.Item,{eventKey:"delete",children:"Delete"})]})]})}),Object(O.jsx)(c,{lg:11,md:11,sm:11,xs:11,name:"body",value:t.body,isEditing:a===t.id,onEdit:o,onBlur:function(){return s(null)},children:t.body})]},t.id)}})},mt=n(306);var pt=function(e){var t=e.show,n=e.heading,r=e.closeButtonText,a=e.submitButtonText,s=e.onSubmit,c=e.onClose,i=e.render,o=e.renderData,u=e.formId,l=void 0===u?null:u;return Object(O.jsxs)(mt.a,{show:t,onHide:c,children:[Object(O.jsx)(mt.a.Header,{closeButton:!0,children:Object(O.jsx)(mt.a.Title,{children:n||""})}),Object(O.jsx)(mt.a.Body,{children:i({data:o})}),Object(O.jsxs)(mt.a.Footer,{children:[Object(O.jsx)(Q.a,{variant:"secondary",onClick:c,children:r||"Close"}),Object(O.jsx)(Q.a,{variant:"primary",type:"submit",form:l,onClick:s,children:a||"Submit"})]})]})};var ft=function(){var e=Object(r.useState)(!1),t=Object(j.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)({}),c=Object(j.a)(s,2),i=c[0],o=c[1],u=function(){a(!1)};return{show:function(e){o(e),a(!0)},RenderDialogBox:function(e){return Object(O.jsx)(pt,Object(b.a)(Object(b.a)({},e),{},{onSubmit:function(t){var n=t;n.preventDefault();var r=n.target.form&&function(e){if(0===e.length)return{};var t={};return e.forEach((function(e){t[e.name]=e.value})),t}(n.target.form.childNodes);"function"===typeof e.onSubmit&&e.onSubmit({data:i,values:r}),u()},show:n,renderData:i,onClose:u}))}}},xt=(n(290),["title","linkUrl"]);var Ot=function(e){var t=e.title,n=e.linkUrl,r=Object(M.a)(e,xt);return Object(O.jsx)(ne,Object(b.a)(Object(b.a)({title:"Issue: "+t},r),{},{bg:"light",sticky:"top",render:function(){return Object(O.jsxs)(X.a,{children:[r.render&&"function"===typeof r.render&&r.render(),Object(O.jsx)($,{variant:"outline-dark",to:n?n+"/new":"./new",children:"Add New Issue"})]})}}))};n(291);var vt=function(e){var t=Object(r.useState)(!1),n=Object(j.a)(t,2),a=n[0],s=n[1];return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("ul",{className:"attachments-list",children:function(){var t=[];return e.attachments&&e.attachments.forEach((function(n,r){t.push(Object(O.jsxs)("li",{children:[Object(O.jsx)("span",{children:n.filename})," ",Object(O.jsx)("a",{href:n.data,download:n.filename,children:"Download"})," ",Object(O.jsx)("button",{className:"link",onClick:function(){e.onDelete(n.id)},children:"Remove"})]},"attachment-".concat(r)))})),t}()}),a?Object(O.jsx)(ze,{sendRequest:e.onCreate,onComplete:e.onComplete,onClose:function(){s(!1)}}):Object(O.jsx)("button",{className:"link",onClick:function(){s(!0)},children:"Add Attachment"})]})};n(292);var gt=function(e){return Object(O.jsx)(oe.d,{initialValues:{title:e.initialTitle,description:e.initialDescription,category:e.initialCategory,priority:e.initialPriority},onSubmit:function(t){e.onSubmit(t)},validationSchema:fe,children:function(){return Object(O.jsxs)(oe.c,{id:"edit-issue-form",children:[Object(O.jsx)(ce.a,{className:"justify-content-center title",children:Object(O.jsxs)(ie.a,{children:[Object(O.jsx)(oe.b,{name:"title",type:"text",className:"form-input"}),Object(O.jsx)("span",{className:"form-error",children:Object(O.jsx)(oe.a,{name:"title"})})]})}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{lg:4,md:4,sm:4,xs:4,children:Object(O.jsx)("label",{htmlFor:"description",children:"Description"})}),Object(O.jsxs)(ie.a,{lg:6,md:6,sm:6,xs:6,children:[Object(O.jsx)(oe.b,{name:"description",as:"textarea",className:"form-input"}),Object(O.jsx)("span",{className:"form-error",children:Object(O.jsx)(oe.a,{name:"description",className:"form-error"})})]})]}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{lg:4,md:4,sm:4,xs:4,children:Object(O.jsx)("label",{htmlFor:"category",children:"Category"})}),Object(O.jsxs)(ie.a,{lg:6,md:6,sm:6,xs:6,children:[Object(O.jsxs)(oe.b,{name:"category",as:"select",className:"form-input",children:[Object(O.jsx)("option",{value:"bug",children:"Bug"}),Object(O.jsx)("option",{value:"feature",children:"Feature"}),Object(O.jsx)("option",{value:"task",children:"Task"}),Object(O.jsx)("option",{value:"other",children:"Other"})]}),Object(O.jsx)("span",{className:"form-error",children:Object(O.jsx)(oe.a,{name:"category",className:"form-error"})})]})]}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{lg:4,md:4,sm:4,xs:4,children:Object(O.jsx)("label",{htmlFor:"priority",children:"Priority"})}),Object(O.jsxs)(ie.a,{lg:6,md:6,sm:6,xs:6,children:[Object(O.jsxs)(oe.b,{name:"priority",as:"select",className:"form-input",children:[Object(O.jsx)("option",{value:"trivial",children:"Trivial"}),Object(O.jsx)("option",{value:"low",children:"Low"}),Object(O.jsx)("option",{value:"regular",children:"Regular"}),Object(O.jsx)("option",{value:"high",children:"High"}),Object(O.jsx)("option",{value:"critical",children:"Critical"})]}),Object(O.jsx)("span",{className:"form-error",children:Object(O.jsx)(oe.a,{name:"priority",className:"form-error"})})]})]})]})}})},yt=["issue","onEdit"];var wt=function(e){var t=e.issue,n=e.onEdit,a=Object(M.a)(e,yt),s=y(),c=w("/api/projects/".concat(a.match.params.projectId,"/issues/").concat(a.match.params.issueId,"/attachments"),s.user?s.user.token:null,t.attachmentHandles),i=Object(j.a)(c,3),o=i[0],u=i[1],h=i[2],m=w("/api/projects/".concat(a.match.params.projectId,"/issues/").concat(a.match.params.issueId,"/comments"),s.user?s.user.token:null),p=Object(j.a)(m,2),f=p[0],x=p[1],v=Object(r.useState)(!1),g=Object(j.a)(v,2),k=g[0],N=g[1],I=qe(),S=ft(),C=S.show,A=S.RenderDialogBox,T=ut(ie.a,"select"),P=function(){var e=Object(d.a)(l.a.mark((function e(r){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s in r)r[s]===t[s]&&delete r[s];return e.next=3,n(a.match.params.projectId,t.id,r);case 3:N(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(d.a)(l.a.mark((function e(n){var r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r=n.target[1].value,e.prev=2,e.next=5,R.addComment(a.match.params.projectId,t.id,r,s.user.token);case 5:c=e.sent,x((function(e){var t=e.data.slice();return t.push(c),Object(b.a)(Object(b.a)({},e),{},{data:t})})),document.querySelector("textarea#comment").value="",I.showNotificationWithText("Comment successfully added"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),I.showNotificationWithText(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(d.a)(l.a.mark((function e(n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.data,e.prev=1,e.next=4,R.deleteComment(a.match.params.projectId,t.id,r.commentId,s.user.token);case 4:x((function(e){var t=e.data.slice(),n=t.findIndex((function(e){return e.id===r.commentId}));return-1!==n&&t.splice(n,1),Object(b.a)(Object(b.a)({},e),{},{data:t})})),I.showNotificationWithText("Comment successfully deleted"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),I.showNotificationWithText(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(d.a)(l.a.mark((function e(n,r){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.updateComment(a.match.params.projectId,t.id,n,r.body,s.user.token);case 3:c=e.sent,x((function(e){var t=e.data.slice(),r=t.findIndex((function(e){return e.id===n}));return t[r]=c,Object(b.a)(Object(b.a)({},e),{},{data:t})})),I.showNotificationWithText("Comment successfully edited"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),I.showNotificationWithText(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),L=function(){var e=Object(d.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.onRemoveAttachment(a.match.params.projectId,t.id,n,s.user.token);case 3:u((function(e){var t=e.data.slice(),r=t.findIndex((function(e){return e.id===n}));return-1!==r&&t.splice(r,1),Object(b.a)(Object(b.a)({},e),{},{data:t})})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),F="unassigned"===t.status?"Assign Issue":"open"===t.status?"Advance Issue":"inprogress"===t.status?"Close Issue":t.status;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(Ot,{title:t.title,render:function(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(Q.a,{className:"stick-left",variant:"outline-dark",onClick:function(){a.history.goBack()},children:"Back to All Issues"}),k&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(Q.a,{variant:"outline-dark",className:"mx-1",form:"edit-issue-form",type:"submit",children:"Save"}),Object(O.jsx)(Q.a,{variant:"outline-dark",className:"mx-1",onClick:function(){return N(!1)},children:"Cancel"})]}),!k&&Object(O.jsx)(Q.a,{variant:"outline-dark",className:"mx-1",onClick:function(){N(!0)},children:"Edit"})]})}}),Object(O.jsxs)(se.a,{className:"IssueDetails",fluid:!0,children:[Object(O.jsx)(A,{heading:"Delete Project",closeButtonText:"Cancel",submitButtonText:"Delete",onSubmit:E,render:function(e){return"Are you sure you would like to delete this comment: "+e.data.commentId+"?"}}),k?Object(O.jsx)(gt,{initialTitle:t.title,initialDescription:t.description,initialCategory:t.category,initialPriority:t.priority,onSubmit:P}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(ce.a,{className:"justify-content-center title",children:Object(O.jsx)("h3",{children:t.title})}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{lg:4,md:4,sm:4,xs:4,children:"Description"}),Object(O.jsx)(ie.a,{as:"p",lg:6,md:6,sm:6,xs:6,name:"description",children:t.description})]}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{lg:4,md:4,sm:4,xs:4,children:"Category"}),Object(O.jsx)(T,{as:"p",lg:6,md:6,sm:6,xs:6,value:t.category,name:"category",onEdit:P,options:["bug","feature","task","other"],children:t.category})]}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{lg:4,md:4,sm:4,xs:4,children:"Priority"}),Object(O.jsx)(T,{as:"p",lg:6,md:6,sm:6,xs:6,value:t.priority,name:"priority",onEdit:P,options:["critical","high","regular","low","trivial"],children:t.priority})]})]}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{lg:4,md:4,sm:4,xs:4,children:"Status"}),Object(O.jsxs)(ie.a,{as:"p",lg:6,md:6,sm:6,xs:6,children:[t.status,Object(O.jsx)(Q.a,{className:"mx-1",size:"sm",hidden:"resolved"===t.status||"closed"===t.status,onClick:function(){return"unassigned"===t.status?a.onAssign({projectId:a.match.params.projectId,issueId:t.id}):"open"===t.status?a.onStart({projectId:a.match.params.projectId,issueId:t.id}):a.onClose({projectId:a.match.params.projectId,issueId:t.id})},children:F})]})]}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{lg:4,md:4,sm:4,xs:4,children:"Created on"}),Object(O.jsx)(ie.a,{as:"p",lg:6,md:6,sm:6,xs:6,children:lt(new Date(t.created_at).toString())})]}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{lg:4,md:4,sm:4,xs:4,children:"Created by"}),Object(O.jsx)(ie.a,{as:"p",lg:6,md:6,sm:6,xs:6,children:t.creator})]}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{lg:4,md:4,sm:4,xs:4,children:"Assigned to"}),Object(O.jsx)(ie.a,{as:"p",lg:6,md:6,sm:6,xs:6,children:t.assignee?t.assignee:"Unassigned"})]}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{lg:4,md:4,sm:4,xs:4,children:"Assigned on"}),Object(O.jsx)(ie.a,{as:"p",lg:6,md:6,sm:6,xs:6,children:t.opened_at?lt(new Date(t.opened_at).toString()):"N/A"})]}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{lg:4,md:4,sm:4,xs:4,children:"Resolved/Closed on"}),Object(O.jsx)(ie.a,{as:"p",lg:6,md:6,sm:6,xs:6,children:t.closed_at?lt(new Date(t.closed_at).toString()):"N/A"})]}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{lg:4,md:4,sm:4,xs:4,children:"Attachments"}),Object(O.jsx)(ie.a,{lg:6,md:6,sm:6,xs:6,id:"attachments-content",children:Object(O.jsx)(vt,{attachments:o.data,onCreate:function(e,n){return a.onCreateAttachmentRequest(a.match.params.projectId,t.id,e,n)},onComplete:function(e){console.log(e),a.onAddAttachment(a.match.params.projectId,t.id,e),h()},onDelete:function(e){console.log(e),L(e)}})})]}),Object(O.jsx)($,{to:"".concat(t.id,"/log"),className:"my-3",children:"View Issue Log"}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{lg:4,md:4,sm:4,xs:4,children:Object(O.jsx)(Q.a,{variant:"outline-primary",type:"submit",form:"add-comment",children:"Add Comment"})}),Object(O.jsx)(ie.a,{lg:4,md:4,sm:4,xs:4,children:Object(O.jsx)(it.a,{id:"add-comment",onSubmit:D,children:Object(O.jsx)(it.a.Group,{controlId:"comment",children:Object(O.jsx)(it.a.Control,{as:"textarea",placeholder:"Enter comment"})})})})]}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{lg:4,md:4,sm:4,xs:4,children:"Comments"}),Object(O.jsx)(ht,{comments:f.data,onEdit:B,onDelete:C})]})]})]})},kt="list_filter_params";function Nt(e){localStorage.setItem(kt,JSON.stringify(e))}var It=function(e){var t=Object(r.useState)(e),n=Object(j.a)(t,2),a=n[0],s=n[1];return Object(r.useEffect)((function(){var t=JSON.parse(localStorage.getItem(kt));t?s(t):Nt(e)}),[]),Object(r.useEffect)((function(){Nt(a)}),[a]),[a,function(e,t){s((function(n){return Object(b.a)(Object(b.a)({},n),{},Object(at.a)({},e,t))}))}]};var St=function(e){var t=e.formId,n=e.fieldName,r=e.selectItems,a=e.itemKey,s=e.initialValues,c=e.onSubmit,i=r.map((function(e,t){return Object(O.jsx)("option",{id:"option".concat(t),value:e.id,children:e[a]},"option".concat(t))}));return Object(O.jsx)(oe.d,{initialValues:s,onSubmit:c,children:function(){return Object(O.jsx)(oe.c,{id:t,children:Object(O.jsx)(oe.b,{name:n,as:"select",children:i})})}})};var Ct=function(e){return Object(O.jsxs)(it.a,{inline:!0,noValidate:!0,onSubmit:function(t){t.preventDefault(),e.onSubmit(t.target.firstChild.value)},className:e.className,style:{alignItems:"flex-start",paddingTop:"0.25rem",flexWrap:"nowrap"},children:[Object(O.jsx)(ue.a,{type:"text",name:"search",placeholder:"Search",className:"ml-2 mr-1"}),Object(O.jsx)(Q.a,{type:"submit",variant:"outline-info",className:"mx-1",children:"Search"})]})},At=n(14),Tt=n(15),Pt=function(){function e(t){Object(At.a)(this,e),this.collaborators=t}return Object(Tt.a)(e,[{key:"get",value:function(e){if(0!==this.collaborators.length)return this.collaborators.find((function(t){return t.id===e}))}}]),e}(),Dt=function(e,t,n,r,a){var s="";switch(e){case"INSERT":s+=t.userName,s+=" created this issue - ",s+=n;break;case"UPDATE":s+=t.userName;var c,i=function(e,t){for(var n=JSON.parse(e),r=JSON.parse(t),a={},s=0,c=Object.keys(n);s<c.length;s++){var i=c[s];n[i]!==r[i]&&(a[i]={oldData:n[i],newData:r[i]})}return a}(r,a),o=Object.keys(i).filter((function(e){return"assigneeId"!==e||"creatorId"!==e})),u=0,l=Object(Se.a)(o);try{for(l.s();!(c=l.n()).done;){var d=c.value;s+="assignee"===d?" assigned this issue ":" changed the "+d+" of this issue",s+=" to '"+i[d].newData+"'",s+=++u<o.length?" and ":""}}catch(j){l.e(j)}finally{l.f()}s+=" - "+n;break;case"DELETE":s+=t.userName,s+=" deleted this issue - ",s+=n}return s};var Et=function(e){var t=y(),n=w("/api/projects/".concat(e.match.params.projectId,"/issues/").concat(e.match.params.issueId,"/reports"),t.user?t.user.token:null),r=Object(j.a)(n,1)[0];return Object(O.jsx)(se.a,{fluid:!0,children:Object(O.jsx)(Ae,{listItems:r.data,render:function(t){if(!t||!e.collaborators||0===e.collaborators.length)return null;var n=lt(new Date(t.createdAt).toString()),r=new Pt(e.collaborators).get(t.createdBy),a=Dt(t.action,r,n,t.oldData,t.newData);return Object(O.jsx)("div",{children:a})}})})},Bt=["issues"],Lt={category:{bug:!0,feature:!0,task:!0,other:!0},priority:{critical:!0,high:!0,regular:!0,low:!0,trivial:!0},status:{unassigned:!0,open:!0,inprogress:!0,resolved:!0,closed:!0}};var Ft=function(e){var t=e.issues,n=Object(M.a)(e,Bt),r=y(),a=qe(),s=w("/api/projects/".concat(n.match.params.projectId,"/collaborators"),r.user?r.user.token:null),c=Object(j.a)(s,1)[0],i=ft(),u=i.show,h=i.RenderDialogBox,m=ft(),p=m.show,f=m.RenderDialogBox,x=ft(),v=x.show,g=x.RenderDialogBox,k=ft(),N=k.show,I=k.RenderDialogBox,S=It({order:"desc",group:"category",filter:Lt,search:""}),C=Object(j.a)(S,2),A=C[0],T=C[1],P=function(){var e=Object(d.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.data,e.prev=1,e.next=4,n.onDelete(r.projectId,r.issueId);case 4:a.showNotificationWithText("Issue Successfully Deleted!"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),a.showNotificationWithText(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(d.a)(l.a.mark((function e(t){var r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.data,s=t.values,e.prev=1,e.next=4,n.onAssign(r.projectId,r.issueId,s.collaboratorId);case 4:a.showNotificationWithText("Issue Successfully Assigned!"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),a.showNotificationWithText(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(d.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.data,e.prev=1,e.t0=n,e.next=5,r.projectId;case 5:e.t1=e.sent,e.t2=r.issueId,e.t0.onStart.call(e.t0,e.t1,e.t2),a.showNotificationWithText("Issue Successfully Advanced to In-Progress!"),e.next=14;break;case 11:e.prev=11,e.t3=e.catch(1),a.showNotificationWithText(e.t3.message);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(d.a)(l.a.mark((function e(t){var r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.data,s=t.values,e.prev=1,e.next=4,n.onClose(r.projectId,r.issueId,s.status);case 4:a.showNotificationWithText("Issue Completed!"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),a.showNotificationWithText(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(h,{heading:"Delete Issue",submitButtonText:"Delete",onSubmit:P,render:function(e){return"Are you sure you would like to delete issue "+e.data.issueId}}),Object(O.jsx)(f,{heading:"Assign Issue",submitButtonText:"Assign",formId:"project-collaborators",onSubmit:D,render:function(){return Object(O.jsx)(St,{formId:"project-collaborators",fieldName:"collaboratorId",initialValues:{collaboratorId:""},selectItems:c.data,itemKey:"userName"})}}),Object(O.jsx)(g,{heading:"Begin Issue",submitButtonText:"Advance",onSubmit:E,render:function(e){return"Are you sure you would like to begin issue "+e.data.issueId+'? The status of this issue will be advanced to "inprogress".'}}),Object(O.jsx)(I,{heading:"Complete Issue",submitButtonText:"Complete",formId:"complete-status",onSubmit:B,render:function(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{children:"Please select how you would like to complete this issue? "}),Object(O.jsx)(St,{formId:"complete-status",fieldName:"status",initialValues:{status:""},selectItems:[{status:"closed"},{status:"resolved"}],itemKey:"status"})]})}}),Object(O.jsxs)(o.d,{children:[Object(O.jsx)(o.b,{path:n.match.path,exact:!0,render:function(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(Ye,{render:function(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(Q.a,{className:"stick-left",variant:"outline-secondary",onClick:function(){n.history.push("/projects")},children:"All Projects"}),Object(O.jsx)(Ct,{className:"search-bar",onSubmit:function(e){T("search",e)}}),Object(O.jsx)(ct,{className:"filter-controls",filters:A.filter,onSelect:T})]})}}),Object(O.jsx)(se.a,{fluid:!0,className:"page light",children:Object(O.jsx)(rt,{projectId:n.match.params.projectId,collaborators:c.data,issueList:t,groupBy:A.group,orderBy:A.order,filter:A.filter,searchText:A.search,searchKeys:["title","description"],onDelete:u,onAssign:p,onStart:v,onClose:N})})]})}}),Object(O.jsx)(o.b,{path:"".concat(n.match.path,"/:issueId"),exact:!0,render:function(e){var r=t.findIndex((function(t){return t.id===Number(e.match.params.issueId)})),a=-1!==r?t[r]:null;if(a)return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(wt,Object(b.a)(Object(b.a)({},e),{},{issue:a,collaborators:c.data,onEdit:n.onEdit,onDelete:u,onAssign:p,onStart:v,onClose:N,onCreateAttachmentRequest:n.onCreateAttachmentRequest,onAddAttachment:n.onAddAttachment,onRemoveAttachment:n.onRemoveAttachment}))})}}),Object(O.jsx)(o.b,{path:"".concat(n.match.path,"/:issueId/log"),exact:!0,render:function(e){var r=t.findIndex((function(t){return t.id===Number(e.match.params.issueId)})),a=-1!==r?t[r]:null,s=e.match.url.split("/");if(s.pop(),s.pop(),a)return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(Ot,{title:a.title,linkUrl:s.join("/"),render:function(){return Object(O.jsx)(Q.a,{className:"stick-left",onClick:function(){n.history.goBack()},children:"Back to Issue Details"})}}),Object(O.jsx)(Et,Object(b.a)({collaborators:c.data},e))]})}})]})]})},Rt=["project"];var qt=function(e){var t=e.project,n=Object(M.a)(e,Rt),r=y(),a=w("/api/projects/".concat(n.match.params.projectId,"/collaborators"),r.user?r.user.token:null),s=Object(j.a)(a,1)[0],c=w("/api/projects/".concat(n.match.params.projectId,"/reports"),r.user?r.user.token:null),i=Object(j.a)(c,1)[0],o=ut(ie.a,"text"),u=ut(ie.a,"textarea"),b=function(){var e=Object(d.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.updateProject(n.match.params.projectId,r.user.token,t);case 2:a=e.sent,console.log(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)(se.a,{fluid:!0,children:[Object(O.jsx)(ce.a,{className:"justify-content-center",children:Object(O.jsx)(o,{as:"h3",value:t.name,name:"name",onEdit:b,children:t.name})}),Object(O.jsx)(ce.a,{className:"justify-content-center",children:Object(O.jsx)(u,{as:"p",value:t.description,name:"description",onEdit:b,children:t.description})}),Object(O.jsx)(ce.a,{children:Object(O.jsx)(ie.a,{as:"h5",children:"Collaborators:"})}),s&&s.data.map((function(e,t){return Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{style:{textAlign:"right"},children:"".concat(e.firstName," ").concat(e.lastName)}),Object(O.jsx)(ie.a,{style:{textAlign:"left"},children:e.userName})]},t)})),Object(O.jsx)(ce.a,{children:Object(O.jsx)(ie.a,{as:"h5",children:"Issues:"})}),Object(O.jsx)(ce.a,{style:{justifyContent:"center"},children:"There are ".concat(t.issues&&t.issues.length," issues related to this project")}),Object(O.jsx)(ce.a,{style:{justifyContent:"center"},children:Object(O.jsx)(ie.a,{as:"h5",children:"Project Log:"})}),Object(O.jsx)(ce.a,{style:{justifyContent:"center"},children:Object(O.jsx)(Ae,{listItems:i.data,render:function(e){if(!e||!n.collaborators||0===n.collaborators.length)return null;var t=lt(new Date(e.createdAt).toString()),r=new Pt(s.data),a=r.get(e.createdBy),c=JSON.parse(e.newData||e.oldData).collaboratorId,i=JSON.parse(e.oldData),o=JSON.parse(e.newData),u=r.get(c),l=function(e,t,n,r,a){var s="";switch(e){case"INSERT_ISSUE":s+=t.userName,s+=" created an issue (#",s+=a.newData.issueId,s+=") for this project - ";break;case"RESOLVE_ISSUE":s+=t.userName,s+=" resolved an issue (#",s+=a.newData.issueId,s+=") for this project - ";break;case"DELETE_ISSUE":s+=t.userName,s+=" deleted an issue (#",s+=a.oldData.issueId,s+=") for this project - ";break;case"UPDATE":s+=t.userName,s+=" updated the details of this project - ";break;case"ADD_COLLAB":s+=t.userName,s+=" added ",s+=n.userName,s+=" to this project - ";break;case"REMOVE_COLLAB":s+=t.userName,s+=" removed ",s+=n.userName,s+=" from this project - ";break;case"INSERT":s+=t.userName,s+=" created this project - ";break;case"DELETE":s+=t.userName,s+=" deleted this project - "}return s+r}(e.action,a,u,t,{oldData:i,newData:o});return Object(O.jsx)("div",{children:l})}})}),Object(O.jsx)(ce.a,{})]})};var Kt=function(e){var t=e.match,n=y(),a=Object(r.useContext)(H),s=qe(),c=w("/api/user/all",n.user?n.user.token:null),i=Object(j.a)(c,1)[0],u=ft(),h=u.show,m=u.RenderDialogBox,p=ft(),f=p.show,x=p.RenderDialogBox;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(m,{heading:"Delete Project",closeButtonText:"Cancel",submitButtonText:"Delete",onSubmit:function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.handleDeleteProject(t);case 3:s.showNotificationWithText("Project Successfully Deleted!"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),s.showNotificationWithText(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),render:function(e){return"Are you sure you would like to delete project with id "+e.data.projectId+"?"}}),Object(O.jsx)(x,{heading:"Add Collaborator",submitButtonText:"Add",formId:"collaborator-select-form",onSubmit:function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.handleAddCollaborator(t);case 3:s.showNotificationWithText("Collaborator Successfully Added to Project!"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),s.showNotificationWithText(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),render:function(){return Object(O.jsx)(St,{formId:"collaborator-select-form",fieldName:"collaboratorId",initialValues:{collaboratorId:""},selectItems:i.data,itemKey:"userName"})}}),Object(O.jsxs)(o.d,{children:[Object(O.jsx)(o.b,{path:t.url,exact:!0,render:function(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(ke,{}),Object(O.jsx)(se.a,{className:"page light",fluid:!0,children:Object(O.jsx)(Be,{projectList:a.data,onDelete:h,onEdit:a.handleEditProject,onAddCollaborator:f})})]})}}),Object(O.jsx)(o.b,{path:"".concat(t.url,"/:projectId/issues/new"),exact:!0,render:function(e){return Object(O.jsx)(Me,Object(b.a)(Object(b.a)({},e),{},{onSubmit:a.handleCreateIssue,onCreateAttachmentRequest:a.handleIssueAttachmentRequest,onAddAttachment:a.addIssueAttachmentHandles}))}}),Object(O.jsx)(o.b,{path:"".concat(t.url,"/:projectId/issues"),render:function(e){var t=a.data.findIndex((function(t){return t.id===Number(e.match.params.projectId)})),n=-1!==t?a.data[t].issues:[];return Object(O.jsx)(Ft,Object(b.a)(Object(b.a)({},e),{},{issues:n,onDelete:a.handleDeleteIssue,onAssign:a.handleAssignIssue,onStart:a.handleStartIssue,onClose:a.handleCloseIssue,onEdit:a.handleEditIssue,onCreateAttachmentRequest:a.handleIssueAttachmentRequest,onAddAttachment:a.addIssueAttachmentHandles,onRemoveAttachment:a.handleRemoveIssueAttachment}))}}),Object(O.jsx)(o.b,{path:"".concat(t.url,"/new"),exact:!0,render:function(e){return Object(O.jsx)(Ke,Object(b.a)(Object(b.a)({},e),{},{onSubmit:a.handleAddProject}))}}),Object(O.jsx)(o.b,{path:"".concat(t.url,"/:projectId/"),exact:!0,render:function(e){var t=a.data.find((function(t){return t.id===Number(e.match.params.projectId)}));if(t)return Object(O.jsx)(qt,Object(b.a)({project:t},e))}})]})]})};n(293);function Ut(e){return Object(O.jsxs)("div",{className:"user-info",children:[Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{lg:6,md:6,s:4,xs:12,className:"label",children:"First Name: "}),Object(O.jsx)(ie.a,{lg:6,md:6,s:8,xs:12,className:"user-detail",children:e.user.firstName})]}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{lg:6,md:6,s:4,xs:12,className:"label",children:"Last Name: "}),Object(O.jsx)(ie.a,{lg:6,md:6,s:8,xs:12,className:"user-detail",children:e.user.lastName})]}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{lg:6,md:6,s:4,xs:12,className:"label",children:"User Name: "}),Object(O.jsx)(ie.a,{lg:6,md:6,s:8,xs:12,className:"user-detail",children:e.user.userName})]}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{lg:6,md:6,s:4,xs:12,className:"label",children:"Email: "}),Object(O.jsx)(ie.a,{lg:6,md:6,s:8,xs:12,className:"user-detail",children:e.user.email})]})]})}n(294);function Vt(e){return Object(O.jsx)(oe.d,{initialValues:{currentPassword:"",newPassword:"",confirmNewPassword:""},onSubmit:function(){var t=Object(d.a)(l.a.mark((function t(n,r){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=r.setSubmitting)(!0),t.next=4,e.onSubmit(n.currentPassword,n.newPassword);case 4:a(!1);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),validationSchema:me,children:function(t){var n=t.isSubmitting;return Object(O.jsxs)(oe.c,{className:"form",children:[Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{children:Object(O.jsx)("label",{htmlFor:"currentPassword",children:"Current Password"})}),Object(O.jsxs)(ie.a,{children:[Object(O.jsx)(oe.b,{name:"currentPassword",type:"password",autoComplete:"new-password"}),Object(O.jsxs)("span",{className:"form-error",children:[e.error&&Object(O.jsx)("div",{children:e.error.message}),Object(O.jsx)(oe.a,{name:"currentPassword"})]})]})]}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{children:Object(O.jsx)("label",{htmlFor:"newPassword",children:"New Password"})}),Object(O.jsxs)(ie.a,{children:[Object(O.jsx)(oe.b,{name:"newPassword",type:"password",autoComplete:"new-password"}),Object(O.jsx)("span",{className:"form-error",children:Object(O.jsx)(oe.a,{name:"newPassword"})})]})]}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{children:Object(O.jsx)("label",{htmlFor:"confirmNewPassword",children:"Confirm New Password"})}),Object(O.jsxs)(ie.a,{children:[Object(O.jsx)(oe.b,{name:"confirmNewPassword",type:"password",autoComplete:"off"}),Object(O.jsx)("span",{className:"form-error",children:Object(O.jsx)(oe.a,{name:"confirmNewPassword"})})]})]}),Object(O.jsx)(ce.a,{children:Object(O.jsx)(Q.a,{variant:"primary",type:"submit",disabled:n,children:"Submit"})})]})}})}function Wt(e){var t=y(),n=function(){var n=Object(d.a)(l.a.mark((function n(r,a){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.changePassword(r,a,function(){var n=Object(d.a)(l.a.mark((function n(r){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r){n.next=5;break}return n.next=3,t.logout((function(){return e.history.push("/dashboard")}));case 3:n.next=6;break;case 5:console.log(r);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}();return Object(O.jsxs)(o.d,{children:[Object(O.jsx)(o.b,{path:e.match.url,exact:!0,render:function(){return Object(O.jsxs)(se.a,{fluid:!0,className:"page",id:"user-account",children:[Object(O.jsx)(ce.a,{as:"h4",children:"Account Information"}),Object(O.jsx)(ce.a,{children:Object(O.jsx)(Ut,{user:t.user})}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)("div",{children:"To change your password, click\xa0"}),Object(O.jsx)(i.b,{to:"account/changePassword",children:"here"}),"."]})]})}}),Object(O.jsx)(o.b,{path:e.match.url+"/changePassword",exact:!0,render:function(){return Object(O.jsxs)(se.a,{fluid:!0,className:"page",id:"change-password",children:[Object(O.jsx)("div",{children:" Change Password "}),Object(O.jsx)(Vt,{onSubmit:n,error:t.error})]})}})]})}n(295);function _t(e){var t=qe();return Object(O.jsx)("div",{className:"notification-banner-container "+(t.show?"show":""),children:Object(O.jsx)("div",{className:"notification-banner",children:t.text})})}var zt=function(){return Object(O.jsx)(i.a,{children:Object(O.jsx)(g,{children:Object(O.jsx)(J,{children:Object(O.jsxs)(Re,{children:[Object(O.jsx)(_t,{}),Object(O.jsx)(ae,{}),Object(O.jsxs)(o.d,{children:[Object(O.jsx)(o.b,{path:"/login",component:ve}),Object(O.jsx)(o.b,{path:"/signup",component:ye}),Object(O.jsx)(G,{path:"/dashboard",component:we}),Object(O.jsx)(G,{path:"/projects",component:Kt}),Object(O.jsx)(G,{path:"/account",component:Wt}),Object(O.jsx)(G,{path:"/",component:we})]})]})})})})};var Ht=function(){return Object(O.jsx)("div",{className:"App",children:Object(O.jsx)(zt,{})})},Jt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,312)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))};c.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(Ht,{})}),document.getElementById("root")),Jt()}},[[296,1,2]]]);
//# sourceMappingURL=main.e67b5edd.chunk.js.map