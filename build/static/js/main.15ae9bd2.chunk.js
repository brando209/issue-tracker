(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{106:function(e,t,n){},152:function(e,t,n){},153:function(e,t,n){},179:function(e,t,n){},181:function(e,t,n){},280:function(e,t,n){},281:function(e,t,n){},282:function(e,t,n){},284:function(e,t,n){},285:function(e,t,n){},286:function(e,t,n){},287:function(e,t,n){},288:function(e,t,n){},289:function(e,t,n){},290:function(e,t,n){},291:function(e,t,n){},292:function(e,t,n){},293:function(e,t,n){},294:function(e,t,n){},295:function(e,t,n){},296:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),s=n(36),c=n.n(s),i=(n(152),n(153),n(24)),o=n(20),l=n(3),u=n.n(l),d=n(8),j=n(10),b=n(5),h=n(17),m=n.n(h),p="track_app_auth_token";var f={isAuthenticated:!1,login:function(e,t){return Object(d.a)(u.a.mark((function n(){var r;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,m.a.post("/api/auth/login",{userName:e.userName,password:e.password});case 3:return r=n.sent,f.isAuthenticated=!0,a=r.data.token,localStorage.setItem(p,a),t(Object(b.a)(Object(b.a)({},r.data.user),{},{token:r.data.token}),null),n.abrupt("return",r.data);case 10:n.prev=10,n.t0=n.catch(0),f.isAuthenticated=!1,t(null,{message:n.t0.response.data.message});case 14:case"end":return n.stop()}var a}),n,null,[[0,10]])})))()},tokenLogin:function(e){return Object(d.a)(u.a.mark((function t(){var n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=localStorage.getItem(p)){t.next=6;break}return f.isAuthenticated=!1,console.log("Token not found"),e(null),t.abrupt("return");case 6:return console.log("Token found"),r=null,t.prev=8,t.next=11,m.a.get("/api/user/login",{headers:{Authorization:"Bearer ".concat(n)}});case 11:r=t.sent,f.isAuthenticated=!0,e(Object(b.a)(Object(b.a)({},r.data),{},{token:n}),null),t.next=20;break;case 16:t.prev=16,t.t0=t.catch(8),f.isAuthenticated=!1,e(null,{message:t.t0.message});case 20:return t.abrupt("return",r);case 21:case"end":return t.stop()}}),t,null,[[8,16]])})))()},signup:function(e,t){return Object(d.a)(u.a.mark((function n(){var r;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,m.a.post("/api/auth/register",Object(b.a)({},e));case 3:return r=n.sent,console.log(r),t(r.data,null),n.abrupt("return",r.data);case 9:n.prev=9,n.t0=n.catch(0),t(null,{message:n.t0.message});case 12:case"end":return n.stop()}}),n,null,[[0,9]])})))()},logout:function(e){return Object(d.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:f.isAuthenticated=!1,localStorage.removeItem(p),e();case 3:case"end":return t.stop()}}),t)})))()},changePassword:function(e,t,n,r){return Object(d.a)(u.a.mark((function a(){var s;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,console.log("authApi",{currentPassword:e,newPassword:t}),a.next=4,m.a.patch("/api/user/changePassword",{currentPassword:e,newPassword:t},{headers:{Authorization:"Bearer ".concat(n)}});case 4:return s=a.sent,console.log(s),r(null),a.abrupt("return",s.data);case 10:a.prev=10,a.t0=a.catch(0),r({message:a.t0.response.data.message});case 13:case"end":return a.stop()}}),a,null,[[0,10]])})))()}},x=f,O=n(0),v=Object(r.createContext)({});function g(e){var t=function(){var e=Object(r.useState)(null),t=Object(j.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(!1),c=Object(j.a)(s,2),i=c[0],o=c[1],l=Object(r.useState)(null),b=Object(j.a)(l,2),h=b[0],m=b[1];Object(r.useEffect)((function(){var e=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.tokenLogin((function(e){e?console.log("Logged in as "+e.userName):console.log("Not logged in"),a(e),m(null),o(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();console.log("Logging in with token"),o(!0),e()}),[]);var p=function(e,t){console.log("logging in"),o(!0),x.login(e,(function(e,n){n?m(n):(a(e),m(null),t(e))})),o(!1)};return{user:n,isLoading:i,error:h,signup:function(e,t){return x.signup(e,(function(e){console.log(e),t(e)}))},login:p,logout:function(e){return x.logout((function(){a(null),m(null),e&&e()}))},changePassword:function(e,t,r){return x.changePassword(e,t,n.token,(function(e){e?(m(e),r(e)):(m(null),r(null))}))}}}();return Object(O.jsx)(v.Provider,{value:t,children:e.children})}function y(){return Object(r.useContext)(v)}var w=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=Object(r.useState)({data:[],isLoading:!1,isError:!1}),s=Object(j.a)(a,2),c=s[0],i=s[1],o=Object(r.useState)(!1),l=Object(j.a)(o,2),b=l[0],h=l[1],p=function(){return h((function(e){return!e}))};return Object(r.useEffect)((function(){var r=function(){var r=Object(d.a)(u.a.mark((function r(){var a,s,c,o;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i({data:[],isLoading:!0,isError:!1}),r.prev=1,a=t?{Authorization:"Bearer ".concat(t)}:{},!n){r.next=15;break}if(0!==n.length){r.next=6;break}return r.abrupt("return",i({data:[],isLoading:!1,isError:!1}));case 6:return c=[],n.forEach((function(t){c.push(m.a.get(e+"/"+t,{headers:a}))})),r.next=10,Promise.all(c);case 10:s=r.sent,o=s.map((function(e){return{filename:e.headers["content-filename"],data:e.data}})),i({data:o,isLoading:!1,isError:!1}),r.next=19;break;case 15:return r.next=17,m.a.get(e,{headers:a});case 17:s=r.sent,i({data:s.data,isLoading:!1,isError:!1});case 19:r.next=25;break;case 21:r.prev=21,r.t0=r.catch(1),console.log(r.t0),i({data:r.t0,isLoading:!1,isError:!0});case 25:case"end":return r.stop()}}),r,null,[[1,21]])})));return function(){return r.apply(this,arguments)}}();r()}),[e,t,b]),[c,i,p]};function k(e){return{Authorization:"Bearer ".concat(e)}}function N(){return(N=Object(d.a)(u.a.mark((function e(t,n,r){var a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=k(r),e.next=4,m.a.post("/api/projects/".concat(t,"/issues"),n,{headers:a});case 4:return s=e.sent,e.abrupt("return",s.data);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function I(){return(I=Object(d.a)(u.a.mark((function e(t,n,r,a){var s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=k(a),e.next=4,m.a.patch("/api/projects/".concat(t,"/issues/").concat(n),r,{headers:s});case 4:return c=e.sent,e.abrupt("return",c.data);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function S(){return(S=Object(d.a)(u.a.mark((function e(t,n,r){var a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=k(r),e.next=4,m.a.delete("/api/projects/".concat(t,"/issues/").concat(n),{headers:a});case 4:return s=e.sent,e.abrupt("return",s.data);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function C(){return(C=Object(d.a)(u.a.mark((function e(t,n,r,a){var s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=k(a),e.next=4,m.a.patch("/api/projects/".concat(t,"/issues/").concat(n,"/assign"),{assigneeId:r},{headers:s});case 4:return c=e.sent,e.abrupt("return",c.data);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function A(){return(A=Object(d.a)(u.a.mark((function e(t,n,r,a){var s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=k(a),e.next=4,m.a.patch("/api/projects/".concat(t,"/issues/").concat(n,"/advance"),{status:r},{headers:s});case 4:return c=e.sent,e.abrupt("return",c.data);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function T(){return(T=Object(d.a)(u.a.mark((function e(t,n,r,a){var s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=k(a),e.next=4,m.a.post("/api/projects/".concat(t,"/issues/").concat(n,"/comments"),{comment:r},{headers:s});case 4:return c=e.sent,console.log(c),e.abrupt("return",c.data);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function P(){return(P=Object(d.a)(u.a.mark((function e(t,n,r,a,s){var c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=k(s),e.next=4,m.a.patch("/api/projects/".concat(t,"/issues/").concat(n,"/comments/").concat(r),{comment:a},{headers:c});case 4:return i=e.sent,console.log(i),e.abrupt("return",i.data);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function D(){return(D=Object(d.a)(u.a.mark((function e(t,n,r,a){var s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=k(a),e.next=4,m.a.delete("/api/projects/".concat(t,"/issues/").concat(n,"/comments/").concat(r),{headers:s});case 4:return c=e.sent,console.log(c),e.abrupt("return",c.data);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function E(){return(E=Object(d.a)(u.a.mark((function e(t,n,r,a,s){var c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=k(a),i={onUploadProgress:function(e){var t=Math.round(100*e.loaded/e.total);s&&"function"===typeof s&&s(t)},headers:c},e.abrupt("return",m.a.post("/api/projects/".concat(t,"/issues/").concat(n,"/attachments"),r,i));case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function B(){return(B=Object(d.a)(u.a.mark((function e(t,n,r,a){var s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=k(a),e.abrupt("return",m.a.get("/api/projects/".concat(t,"/issues/").concat(n,"/attachments/").concat(r),{headers:s}));case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function L(){return(L=Object(d.a)(u.a.mark((function e(t,n,r,a){var s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=k(a),c=m.a.delete("/api/projects/".concat(t,"/issues/").concat(n,"/attachments/").concat(r),{headers:s}),console.log(c),e.abrupt("return",c);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var F={createIssue:function(e,t,n){return N.apply(this,arguments)},updateIssue:function(e,t,n,r){return I.apply(this,arguments)},deleteIssue:function(e,t,n){return S.apply(this,arguments)},assignIssue:function(e,t,n,r){return C.apply(this,arguments)},advanceIssue:function(e,t,n,r){return A.apply(this,arguments)},addComment:function(e,t,n,r){return T.apply(this,arguments)},updateComment:function(e,t,n,r,a){return P.apply(this,arguments)},deleteComment:function(e,t,n,r){return D.apply(this,arguments)},createAttachment:function(e,t,n,r,a){return E.apply(this,arguments)},getAttachment:function(e,t,n,r){return B.apply(this,arguments)},deleteAttachment:function(e,t,n,r){return L.apply(this,arguments)}},R=F;function K(){return(K=Object(d.a)(u.a.mark((function e(t,n){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=k(n),e.next=4,m.a.post("/api/projects",t,{headers:r});case 4:return a=e.sent,e.abrupt("return",a);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function q(){return(q=Object(d.a)(u.a.mark((function e(t,n,r){var a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=k(n),e.next=4,m.a.patch("/api/projects/".concat(t),r,{headers:a});case 4:return s=e.sent,e.abrupt("return",s);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function V(){return(V=Object(d.a)(u.a.mark((function e(t,n){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=k(n),e.next=4,m.a.delete("/api/projects/".concat(t),{headers:r});case 4:return a=e.sent,e.abrupt("return",a);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function U(){return(U=Object(d.a)(u.a.mark((function e(t,n,r){var a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=k(r),e.next=4,m.a.post("/api/projects/".concat(t,"/collaborators"),{collaboratorId:n},{headers:a});case 4:return s=e.sent,e.abrupt("return",s);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function _(){return(_=Object(d.a)(u.a.mark((function e(t,n,r){var a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=k(r),e.next=4,m.a.delete("/api/projects/".concat(t,"/collaborators"),{collaboratorId:n},{headers:a});case 4:return s=e.sent,e.abrupt("return",s);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}var H={createProject:function(e,t){return K.apply(this,arguments)},updateProject:function(e,t,n){return q.apply(this,arguments)},deleteProject:function(e,t){return V.apply(this,arguments)},addProjectCollaborator:function(e,t,n){return U.apply(this,arguments)},removeProjectCollaborator:function(e,t,n){return _.apply(this,arguments)}},W=H,J=Object(r.createContext)({});function z(e){var t=function(){var e=y(),t=w("/api/projects",e.user?e.user.token:null),n=Object(j.a)(t,2),r=n[0],a=n[1],s=function(){var t=Object(d.a)(u.a.mark((function t(n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.data,t.next=3,W.deleteProject(r.projectId,e.user.token);case 3:a((function(e){var t=e.data.slice(),n=t.findIndex((function(e){return e.id===r.projectId}));return t.splice(n,1),Object(b.a)(Object(b.a)({},e),{},{data:t})}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),c=function(){var t=Object(d.a)(u.a.mark((function t(n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W.createProject(n,e.user.token);case 2:r=t.sent,a((function(e){var t=e.data.slice();return t.push(Object(b.a)(Object(b.a)({},r.data),{},{issues:[]})),Object(b.a)(Object(b.a)({},e),{},{data:t})}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),i=function(){var e=Object(d.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),o=function(){var t=Object(d.a)(u.a.mark((function t(n){var r,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.data,a=n.values,t.next=3,W.addProjectCollaborator(r.projectId,a.collaboratorId,e.user.token);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l=function(){var t=Object(d.a)(u.a.mark((function t(n,r){var s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R.createIssue(n,r,e.user.token);case 2:return s=t.sent,a((function(e){var t=e.data.slice(),r=t.findIndex((function(e){return e.id===Number(n)}));return t[r].issues.push(s),Object(b.a)(Object(b.a)({},e),{},{data:t})})),t.abrupt("return",s);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),h=function(){var t=Object(d.a)(u.a.mark((function t(n,r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R.deleteIssue(n,r,e.user.token);case 2:a((function(e){var t=e.data.slice(),a=t.findIndex((function(e){return e.id===Number(n)})),s=t[a]&&t[a].issues&&t[a].issues.length>0&&t[a].issues.findIndex((function(e){return e.id===Number(r)}));return t[a].issues.splice(s,1),Object(b.a)(Object(b.a)({},e),{},{data:t})}));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),m=function(){var t=Object(d.a)(u.a.mark((function t(n,r,s){var c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==Object.keys(s).length){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,R.updateIssue(n,r,s,e.user.token);case 4:c=t.sent,a((function(e){var t=e.data.slice(),a=t.findIndex((function(e){return e.id===Number(n)})),s=t[a]&&t[a].issues&&t[a].issues.length>0&&t[a].issues.findIndex((function(e){return e.id===Number(r)}));return t[a].issues[s]=c,Object(b.a)(Object(b.a)({},e),{},{data:t})}));case 6:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),p=function(){var t=Object(d.a)(u.a.mark((function t(n,r,s){var c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R.assignIssue(n,r,s,e.user.token);case 2:c=t.sent,a((function(e){var t=e.data.slice(),a=t.findIndex((function(e){return e.id===Number(n)})),s=t[a]&&t[a].issues&&t[a].issues.length>0&&t[a].issues.findIndex((function(e){return e.id===Number(r)}));return t[a].issues[s]=c,Object(b.a)(Object(b.a)({},e),{},{data:t})}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),f=function(){var t=Object(d.a)(u.a.mark((function t(n,r){var s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R.advanceIssue(n,r,"inprogress",e.user.token);case 2:s=t.sent,a((function(e){var t=e.data.slice(),a=t.findIndex((function(e){return e.id===Number(n)})),c=t[a]&&t[a].issues&&t[a].issues.length>0&&t[a].issues.findIndex((function(e){return e.id===Number(r)}));return t[a].issues[c]=s,Object(b.a)(Object(b.a)({},e),{},{data:t})}));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),x=function(){var t=Object(d.a)(u.a.mark((function t(n,r,s){var c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R.advanceIssue(n,r,s,e.user.token);case 2:c=t.sent,a((function(e){var t=e.data.slice(),a=t.findIndex((function(e){return e.id===Number(n)})),s=t[a]&&t[a].issues&&t[a].issues.length>0&&t[a].issues.findIndex((function(e){return e.id===Number(r)}));return t[a].issues[s]=c,Object(b.a)(Object(b.a)({},e),{},{data:t})}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),O=function(){var t=Object(d.a)(u.a.mark((function t(n,r,a,s){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("in context"),t.abrupt("return",R.createAttachment(n,r,a,e.user.token,s));case 2:case"end":return t.stop()}}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}(),v=function(e,t,n){a((function(r){var a=r.data.slice(),s=a.findIndex((function(t){return t.id===Number(e)})),c=a[s]&&a[s].issues&&a[s].issues.length>0&&a[s].issues.findIndex((function(e){return e.id===Number(t)})),i=a[s].issues[c].attachmentHandles||[];return a[s].issues[c].attachmentHandles=i.concat(n),Object(b.a)(Object(b.a)({},r),{},{data:a})}))};return{data:r.data,handleDeleteProject:s,handleEditProject:i,handleAddProject:c,handleAddCollaborator:o,handleDeleteIssue:h,handleEditIssue:m,handleCreateIssue:l,handleAssignIssue:p,handleStartIssue:f,handleCloseIssue:x,handleIssueAttachmentRequest:O,addIssueAttachmentHandles:v}}();return Object(O.jsx)(J.Provider,{value:t,children:e.children})}var M=n(13),G=["children","component"];var X=function(e){var t=e.children,n=e.component,r=Object(M.a)(e,G),a=y(),s=n;return Object(O.jsx)(o.b,Object(b.a)(Object(b.a)({},r),{},{render:function(e){return a.user?t||Object(O.jsx)(s,Object(b.a)({},e)):Object(O.jsx)(o.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},Y=n(309),Q=n(53),Z=["to","text"];var $=function(e){var t=e.to,n=e.text,r=Object(M.a)(e,Z);return Object(O.jsx)(Q.a,Object(b.a)(Object(b.a)({as:i.b,to:t||"#",variant:"outline-primary"},r),{},{children:n||r.children}))},ee=n(310),te=(n(179),["title","logo","render"]);var ne=function(e){var t=e.title,n=e.logo,r=e.render,a=Object(M.a)(e,te);return Object(O.jsxs)(ee.a,Object(b.a)(Object(b.a)({className:"NavBar"},a),{},{children:[Object(O.jsxs)(ee.a.Brand,{id:"brand",href:"/",children:[n?Object(O.jsx)("img",{alt:"",src:n,className:"logo"}):null,t]}),Object(O.jsx)(ee.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(O.jsx)(ee.a.Collapse,{id:"basic-navbar-nav",className:"justify-content-end",children:r()})]}))},re=n.p+"static/media/logo.103b5fa1.svg";var ae=function(e){var t=y(),n=function(){t.logout((function(){console.log("Logged out")}))};return Object(O.jsx)(ne,{title:"Issue Tracker",logo:re,bg:"dark",expand:"md",render:function(){return Object(O.jsxs)(Y.a,{children:[t.user?null:Object(O.jsx)($,{className:"m-sm-1",to:"login",children:"Login"}),t.user?null:Object(O.jsx)($,{className:"m-sm-1",to:"signup",children:"Signup"}),t.user?Object(O.jsx)($,{className:"m-sm-1",to:"/dashboard",children:"Dashboard"}):null,t.user?Object(O.jsx)($,{className:"m-sm-1",to:"/account",children:"Account"}):null,t.user?Object(O.jsx)($,{className:"m-sm-1",onClick:n,children:"Logout"}):null]})}})},se=n(85),ce=n(301),ie=n(146),oe=n(11),le=n(142);n(181);function ue(e){return Object(O.jsxs)("span",{className:"text-input-container",children:[Object(O.jsx)("label",{htmlFor:e.name,children:e.label}),Object(O.jsx)("span",{className:"form-error",children:Object(O.jsx)(oe.a,{name:e.name})}),Object(O.jsx)(oe.b,{as:le.a,name:e.name,type:e.type,className:"form-input"})]})}var de=n(19),je=de.a().shape({firstName:de.c().min(3,"Too Short!").max(20,"Too Long!").required("Required"),lastName:de.c().min(3,"Too Short!").max(20,"Too Long!").required("Required"),userName:de.c().min(3,"Too Short!").max(20,"Too Long!").required("Required"),email:de.c().email("Invalid email").required("Required"),password:de.c().min(6,"Too Short!").max(20,"Too Long!").required("Required"),confirmPassword:de.c().oneOf([de.b("password"),""],"Passwords do not match")}),be=de.a().shape({userName:de.c().min(3,"Too Short!").max(20,"Too Long!").required("Required"),password:de.c().min(6,"Too Short!").max(20,"Too Long!").required("Required")}),he=de.a().shape({currentPassword:de.c().min(6,"Too Short!").max(20,"Too Long!").required("Required"),newPassword:de.c().min(6,"Too Short!").max(20,"Too Long!").required("Required"),confirmNewPassword:de.c().oneOf([de.b("newPassword"),null],"Passwords must match")}),me=de.a().shape({name:de.c().min(3,"Too Short!").max(30,"Too Long!").required("Required"),description:de.c().min(3,"Too Short!").max(512,"Too Long!").required("Required")}),pe=de.a().shape({title:de.c().min(3,"Too Short!").max(30,"Too Long!").required("Required"),description:de.c().min(3,"Too Short!").max(512,"Too Long!").required("Required")}),fe=["onSubmit"];var xe=function(e){var t=e.onSubmit,n=Object(M.a)(e,fe);return Object(O.jsx)(oe.d,{initialValues:{userName:"",password:""},validationSchema:be,onSubmit:function(){var e=Object(d.a)(u.a.mark((function e(n,r){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=r.setSubmitting)(!0),e.prev=2,e.next=5,t(n);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:a(!1);case 11:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting;return Object(O.jsxs)(oe.c,{className:"form",children:[Object(O.jsx)(ce.a,{as:"h3",className:"center-align heading",children:"Login"}),Object(O.jsx)(ce.a,{as:"h5",className:"left-align subheading",children:"Login to your account"}),Object(O.jsx)(ce.a,{as:"p",className:"left-align message",children:"Welcome! You must log in to your account to view and manage your projects with [insert issue tracker name here]!"}),Object(O.jsx)(ce.a,{className:"mx-4",children:Object(O.jsx)(ue,{name:"userName",type:"text",label:"Username"})}),Object(O.jsx)(ce.a,{className:"mx-4",children:Object(O.jsx)(ue,{name:"password",type:"password",label:"Password"})}),n.error&&Object(O.jsx)("div",{className:"form-error",children:n.error.message}),Object(O.jsx)(ce.a,{className:"my-3",children:Object(O.jsx)(Q.a,{variant:"primary",type:"submit",disabled:t,children:"Login"})}),Object(O.jsxs)(ce.a,{as:"p",className:"center-align message",children:["Don't have an account yet? Please ",Object(O.jsx)(i.b,{to:"signup",children:"\xa0Sign up\xa0"})," to continue."]})]})}})};n(106);var Oe=function(e){var t=y(),n=e.location.state?e.location.state.from:null;return t.isLoading?Object(O.jsx)("div",{children:"Loading..."}):t.user?Object(O.jsx)(o.a,{to:n?n.pathname:"/"}):Object(O.jsx)(se.a,{fluid:!0,className:"page",children:Object(O.jsx)(ce.a,{className:"form-container",children:Object(O.jsx)(ie.a,{xs:12,sm:8,md:6,lg:5,children:Object(O.jsx)(xe,{onSubmit:function(e){return t.login(e,(function(e){console.log("Signed in as "+e.userName+"!")}))},error:t.error})})})})};n(280);var ve=function(e){return Object(O.jsx)(oe.d,{initialValues:{firstName:"",lastName:"",email:"",userName:"",password:"",confirmPassword:""},validationSchema:je,onSubmit:function(){var t=Object(d.a)(u.a.mark((function t(n,r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.setSubmitting(!0),t.prev=1,t.next=4,e.onSubmit(n);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),console.log(t.t0);case 9:r.setSubmitting(!1);case 10:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e,n){return t.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting;return Object(O.jsxs)(oe.c,{className:"form",autoComplete:"false",children:[Object(O.jsx)(ce.a,{as:"h3",lg:1,className:"center-align heading",children:"Sign Up"}),Object(O.jsx)(ce.a,{as:"h5",className:"left-align subheading",children:"Sign up for an account"}),Object(O.jsx)(ce.a,{as:"p",className:"left-align message",children:"Sign up today and you can begin keeping track of all tasks and issues related to your projects with [insert issue tracker name here]!"}),Object(O.jsxs)(ce.a,{className:"mx-4",children:[Object(O.jsx)(ie.a,{xs:12,md:6,children:Object(O.jsx)(ue,{name:"firstName",type:"text",label:"First name"})}),Object(O.jsx)(ie.a,{xs:12,md:6,children:Object(O.jsx)(ue,{name:"lastName",type:"text",label:"Last name"})})]}),Object(O.jsxs)(ce.a,{className:"mx-4",children:[Object(O.jsx)(ie.a,{xs:12,md:6,children:Object(O.jsx)(ue,{name:"userName",type:"text",label:"User name"})}),Object(O.jsx)(ie.a,{xs:12,md:6,children:Object(O.jsx)(ue,{name:"email",type:"text",label:"Email"})})]}),Object(O.jsxs)(ce.a,{className:"mx-4",children:[Object(O.jsx)(ie.a,{xs:12,md:6,children:Object(O.jsx)(ue,{name:"password",type:"password",label:"Password"})}),Object(O.jsx)(ie.a,{xs:12,md:6,children:Object(O.jsx)(ue,{name:"confirmPassword",type:"password",label:"Confirm Password"})})]}),Object(O.jsx)(ce.a,{className:"my-3",children:Object(O.jsx)(Q.a,{variant:"primary",type:"submit",disabled:t,children:"Sign up"})}),Object(O.jsxs)(ce.a,{as:"p",className:"center-align message",children:["Already have an account? Please ",Object(O.jsx)(i.b,{to:"login",children:"\xa0Log in\xa0"})," to continue."]})]})}})};var ge=function(){var e=y(),t=Object(r.useState)(!1),n=Object(j.a)(t,2),a=n[0],s=n[1],c=function(){var t=Object(d.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.signup(n,(function(e){console.log(e)}));case 2:s(!0);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return e.isLoading?Object(O.jsx)("div",{children:"Loading..."}):e.user||a?Object(O.jsx)(o.a,{to:"/"}):Object(O.jsx)(se.a,{fluid:!0,className:"page",children:Object(O.jsx)(ce.a,{className:"form-container",children:Object(O.jsx)(ie.a,{xs:12,sm:10,md:8,xl:6,children:Object(O.jsx)(ve,{onSubmit:c})})})})};n(281);var ye=function(){return Object(O.jsxs)(se.a,{className:"tile-container",children:[Object(O.jsx)($,{to:"/projects",className:"tile",children:"Projects&Issues"}),Object(O.jsx)(Q.a,{className:"tile",children:"Reports (Coming Soon)"})]})};var we=function(){return Object(O.jsx)(ne,{title:"Projects",bg:"light",render:function(){return Object(O.jsx)(Y.a,{children:Object(O.jsx)($,{to:"/projects/new",className:"m-sm-1",children:"Add New Project"})})}})};var ke=function(e){var t=e.item,n=e.render;return Object(O.jsx)("div",{className:"list-item",children:n(t)})};var Ne=function(e){var t=e.name,n=e.value,a=e.items,s=e.render,c=Object(r.useState)(!1),i=Object(j.a)(c,2),o=i[0],l=i[1];return Object(O.jsxs)("div",{className:"list-item-group "+t,children:[Object(O.jsx)("div",{className:"group-header "+(o?"collapsed":""),onClick:function(){return l((function(e){return!e}))},children:n}),o?null:a&&a.length>0?a.map((function(e,t){return Object(O.jsx)(ke,{item:e,render:s},"".concat(n,"-").concat(t))})):Object(O.jsx)("div",{className:"empty-group-message",children:"There are no items to display for this group"})]})},Ie=(n(282),n(33)),Se=n(51),Ce=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(!t)return e;var a=Object(Se.mapValues)(t,(function(e){var t=Object(Se.pickBy)(e,(function(e){return!0===e}));return Object.keys(t)})),s=e&&e.length>0&&e.filter((function(e){for(var t=!0,s=0,c=Object.keys(a);s<c.length;s++){var i=c[s];!1===Object(Se.includes)(a[i],e[i])&&(t=!1)}if(t&&""!==n){var o,l=Object(Ie.a)(r);try{for(l.s();!(o=l.n()).done;){var u=o.value;if(!0===Object(Se.includes)(e[u].toLowerCase(),n.toLowerCase())){t=!0;break}t=!1}}catch(d){l.e(d)}finally{l.f()}}return t}));return s||e},Ae=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t)return e;var n=Object(Se.groupBy)(e,(function(e){return e[t]}));return n};var Te=function(e){var t=e.listItems,n=e.groupKey,r=void 0===n?null:n,a=e.groupValues,s=void 0===a?null:a,c=e.orderBy,i=void 0===c?"asc":c,o=e.filter,l=void 0===o?null:o,u=e.searchText,d=void 0===u?"":u,j=e.searchKeys,b=void 0===j?[]:j,h=e.render,m=Ce(t,l,d,b),p=Ae(m,r);return Object(O.jsx)("div",{className:"list-container",children:function(){var e;if(r&&s){var t=[];s.forEach((function(e){var n=p[e];t.push(Object(O.jsx)(Ne,{name:r,value:e,items:n,render:h},"".concat(r,"=").concat(e)))})),e="desc"===i?t.reverse():t}else e=m&&m.map((function(e,t){return Object(O.jsx)(ke,{item:e,keyValue:t,render:h},t)}));return e}()})},Pe=n(311),De=n(302),Ee=n(303),Be=n(147);var Le=function(e){var t=e.project,n=e.onDelete,r=e.onEdit,a=e.onAddCollaborator;return Object(O.jsxs)(Pe.a,{className:"project-list-card",children:[Object(O.jsxs)(Pe.a.Body,{className:"left-side",children:[Object(O.jsx)(Pe.a.Title,{children:t.name}),Object(O.jsx)(Pe.a.Text,{children:t.description}),Object(O.jsxs)(De.a,{className:"buttons",children:[Object(O.jsx)($,{variant:"primary",to:"/projects/".concat(t.id),children:"View Project"}),Object(O.jsxs)(Ee.a,{variant:"secondary",title:"Settings",children:[Object(O.jsx)(Be.a.Item,{onClick:function(){return r(t.id)},children:"Edit Project"}),Object(O.jsx)(Be.a.Item,{onClick:function(){return n({projectId:t.id})},children:"Delete Project"}),Object(O.jsx)(Be.a.Item,{onClick:function(){return a({projectId:t.id})},children:"Add Collaborator"})]})]})]}),Object(O.jsxs)(Pe.a.Body,{className:"right-side",style:{borderLeft:"1px solid black"},children:[Object(O.jsx)(Pe.a.Title,{children:"Issue Details"}),Object(O.jsx)(Pe.a.Text,{children:"There are "+t.issues.length+" issues related to this project"}),Object(O.jsxs)(De.a,{className:"buttons",children:[Object(O.jsx)($,{variant:"primary",to:"/projects/".concat(t.id,"/issues"),children:"View Issues"}),Object(O.jsx)($,{variant:"secondary",to:"/projects/".concat(t.id,"/issues/new"),children:"Add New Issue"})]})]})]})},Fe=(n(284),["projectList"]);var Re=function(e){var t=e.projectList,n=Object(M.a)(e,Fe);return t?Object(O.jsx)(Te,{listItems:t,render:function(e){return Object(O.jsx)(Le,Object(b.a)({project:e},n))}}):"No projects"};var Ke=function(e){var t=e.onSubmit;return Object(O.jsx)(oe.d,{initialValues:{name:"",description:""},validationSchema:me,onSubmit:function(){var e=Object(d.a)(u.a.mark((function e(n,r){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=r.setSubmitting)(!0),e.prev=2,e.next=5,t(n);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:a(!1);case 11:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting;return Object(O.jsxs)(oe.c,{className:"form",children:[Object(O.jsx)(ce.a,{as:"h3",children:"Create New Project"}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{children:Object(O.jsx)("label",{htmlFor:"name",children:"Project Name"})}),Object(O.jsxs)(ie.a,{children:[Object(O.jsx)(oe.b,{name:"name",type:"text",className:"form-input"}),Object(O.jsx)(oe.a,{name:"name",className:"form-error"})]})]}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{children:Object(O.jsx)("label",{htmlFor:"description",children:"Description"})}),Object(O.jsxs)(ie.a,{children:[Object(O.jsx)(oe.b,{name:"description",as:"textarea",className:"form-input"}),Object(O.jsx)(oe.a,{name:"description",className:"form-error"})]})]}),Object(O.jsx)(ce.a,{children:Object(O.jsx)(Q.a,{variant:"primary",type:"submit",disabled:t,children:"Create Project"})})]})}})},qe=Object(r.createContext)({});function Ve(e){var t=function(){var e=Object(r.useState)("Notification Banner"),t=Object(j.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(!1),c=Object(j.a)(s,2),i=c[0],o=c[1];return{text:n,show:i,showNotificationWithText:function(e){a(e),o(!0),setTimeout((function(){o(!1),a("")}),5e3)}}}();return Object(O.jsx)(qe.Provider,{value:t,children:e.children})}function Ue(){return Object(r.useContext)(qe)}var _e=function(e){var t=y(),n=Ue(),a=Object(r.useState)(!1),s=Object(j.a)(a,2),c=s[0],i=s[1],l=function(){var r=Object(d.a)(u.a.mark((function r(a){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("Creating project with token "+t.user.token),r.next=3,e.onSubmit(a);case 3:n.showNotificationWithText("Project successfully created!"),i(!0);case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();return!0===c?Object(O.jsx)(o.a,{to:"/projects"}):Object(O.jsx)(se.a,{fluid:!0,className:"page",children:Object(O.jsx)(Ke,{onSubmit:l})})},He=n(312);n(285);var We=function(e){var t=e.name,n=e.disabled,a=e.onFilesAdded,s=Object(r.useState)(!1),c=Object(j.a)(s,2),i=c[0],o=c[1],l=Object(r.useRef)(null),u=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e.item(n));return t};return Object(O.jsxs)("div",{className:"dropzone ".concat(i?"highlight":""),onDragOver:function(e){e.preventDefault(),o(!0)},onDragLeave:function(){o(!1)},onDrop:function(e){if(e.preventDefault(),!n){var t=e.dataTransfer.files;if(a){var r=u(t);a(r)}o(!1)}},onClick:function(){n||l.current.click()},style:{cursor:n?"default":"pointer"},children:[Object(O.jsx)("input",{ref:l,name:t,className:"file-input",type:"file",multiple:!0,onChange:function(e){if(!n){var t=e.target.files;if(a){var r=u(t);a(r)}}}}),Object(O.jsx)("img",{alt:"upload",className:"icon",src:"/upload_file_black_24dp.svg"}),Object(O.jsx)("span",{children:"Upload Files"})]})},Je=(n(286),["onChange","sendRequest","onClose","setUploadCallbacks"]),ze={files:[],isUploading:!1,progress:{},successful:!1};var Me=function(e){var t=e.onChange,n=e.sendRequest,a=e.onClose,s=e.setUploadCallbacks,c=Object(M.a)(e,Je),i=Object(r.useState)(ze),o=Object(j.a)(i,2),l=o[0],h=o[1];Object(r.useEffect)((function(){s&&s((function(){return p}))}),[s]);var m=function(){var e=Object(d.a)(u.a.mark((function e(){var t,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h((function(e){return Object(b.a)(Object(b.a)({},e),{},{progress:{},isUploading:!0})})),t=[],console.log(l),l.files&&l.files.forEach((function(e){console.log("sending request from upload"),r=p(e);var a=new FormData;a.append("attachments",e),t.push(n(a,r.progressCb))})),e.prev=4,e.next=7,Promise.all(t).then((function(e){return e.map((function(e){return e.data.id}))})).then((function(e){return r.successCb(),e})).catch((function(e){return r.failureCb(e)}));case 7:a=e.sent,c.onComplete(a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),r.failureCb(e.t0);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(){return e.apply(this,arguments)}}(),p=function(e){return h((function(e){return Object(b.a)(Object(b.a)({},e),{},{progress:{},isUploading:!0})})),{progressCb:function(t){t&&100!==t?(console.log("isuploading"),h((function(n){var r=Object(b.a)({},n.progress);return r[e.name]={state:"pending",percentage:t},Object(b.a)(Object(b.a)({},n),{},{progress:r})}))):t&&(console.log("issuccessful"),h((function(n){var r=Object(b.a)({},n.progress);return r[e.name]={state:"done",percentage:t},Object(b.a)(Object(b.a)({},n),{},{progress:r})})))},successCb:function(){console.log("calling success"),h((function(e){return Object(b.a)(Object(b.a)({},e),{},{successful:!0,uploading:!1})}))},failureCb:function(e){console.log("calling failure",e),h((function(e){return Object(b.a)(Object(b.a)({},e),{},{successful:!1,uploading:!1})}))}}},f=function(e){var t=l.progress&&l.progress[e.name];if(l.isUploading||l.successful)return Object(O.jsxs)("div",{className:"progress-wrapper",children:[Object(O.jsx)(He.a,{now:t?t.percentage:0}),Object(O.jsx)("img",{className:"successful-icon",alt:"successful",src:"/file_download_done_black_24dp.svg",style:{opacity:t&&"done"===t.state?.5:0}})]})};return Object(O.jsxs)("div",{className:"upload",children:[Object(O.jsxs)("div",{className:"header",children:[Object(O.jsx)("span",{className:"title",children:"Upload Files"}),a&&Object(O.jsx)("button",{className:"close-upload link",onClick:function(){return a()},children:"X"})]}),Object(O.jsxs)("div",{className:"content",children:[Object(O.jsx)("div",{children:Object(O.jsx)(We,{name:c.name,onFilesAdded:function(e){h((function(n){var r=n.files.concat(e);return t&&t(r),Object(b.a)(Object(b.a)({},n),{},{files:r})}))},disabled:l.isUploading||l.successful})}),Object(O.jsx)("div",{className:"files",children:l.files&&l.files.map((function(e,t){return Object(O.jsxs)("div",{className:"file-progress",children:[Object(O.jsx)("span",{className:"filename",children:e.name}),f(e)," ",Object(O.jsx)("button",{className:"remove-attachment link",onClick:function(){return e=t,void h((function(t){console.log("removing file:",e);var n=t.files.slice();return n.splice(e,1),Object(b.a)(Object(b.a)({},t),{},{files:n})}));var e},style:{display:l.isUploading||l.successful?"none":"inline"},children:"X"})]},"file.name-".concat(t))}))})]}),Object(O.jsx)("div",{className:"actions",children:n?l.successful?Object(O.jsx)(Q.a,{onClick:function(){return h(ze)},children:"Clear"}):Object(O.jsx)(Q.a,{disabled:!l.files||l.files.length<0||l.isUploading,onClick:m,children:"Upload"}):null})]})};var Ge=function(e){var t=e.onSubmit,n=e.collaborators,a=Object(r.useState)({progressCb:function(e){console.log(e)},successCb:function(){console.log("Successful upload")},failureCb:function(){console.log("Failed upload")}}),s=Object(j.a)(a,2),c=s[0],i=s[1];return Object(O.jsx)(oe.d,{initialValues:{title:"",description:"",category:"other",priority:"regular",status:"unassigned",assigneeId:""},validationSchema:pe,onSubmit:function(){var e=Object(d.a)(u.a.mark((function e(n,r){var a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=r.setSubmitting)(!0),e.prev=2,s=n,e.next=6,t(s,c);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0);case 11:a(!1);case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,r=e.setFieldValue,a=e.submitForm,s=e.resetForm;return Object(O.jsxs)(oe.c,{className:"form",id:"new-issue-form",children:[Object(O.jsx)(ce.a,{as:"h3",children:"Add New Issue"}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{children:Object(O.jsx)("label",{htmlFor:"title",children:"Issue Title"})}),Object(O.jsxs)(ie.a,{children:[Object(O.jsx)(oe.b,{name:"title",type:"text",className:"form-input"}),Object(O.jsx)("span",{className:"form-error",children:Object(O.jsx)(oe.a,{name:"title"})})]})]}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{children:Object(O.jsx)("label",{htmlFor:"description",children:"Description"})}),Object(O.jsxs)(ie.a,{children:[Object(O.jsx)(oe.b,{name:"description",as:"textarea",className:"form-input"}),Object(O.jsx)("span",{className:"form-error",children:Object(O.jsx)(oe.a,{name:"description",className:"form-error"})})]})]}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{children:Object(O.jsx)("label",{htmlFor:"category",children:"Category"})}),Object(O.jsxs)(ie.a,{children:[Object(O.jsxs)(oe.b,{name:"category",as:"select",className:"form-input",children:[Object(O.jsx)("option",{value:"bug",children:"Bug"}),Object(O.jsx)("option",{value:"feature",children:"Feature"}),Object(O.jsx)("option",{value:"task",children:"Task"}),Object(O.jsx)("option",{value:"other",children:"Uncategorized"})]}),Object(O.jsx)("span",{className:"form-error",children:Object(O.jsx)(oe.a,{name:"category",className:"form-error"})})]})]}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{children:Object(O.jsx)("label",{htmlFor:"priority",children:"Priority"})}),Object(O.jsxs)(ie.a,{children:[Object(O.jsxs)(oe.b,{name:"priority",as:"select",className:"form-input",children:[Object(O.jsx)("option",{value:"trivial",children:"Trivial"}),Object(O.jsx)("option",{value:"low",children:"Low"}),Object(O.jsx)("option",{value:"regular",children:"Regular"}),Object(O.jsx)("option",{value:"high",children:"High"}),Object(O.jsx)("option",{value:"critical",children:"Critical"})]}),Object(O.jsx)("span",{className:"form-error",children:Object(O.jsx)(oe.a,{name:"priority",className:"form-error"})})]})]}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{children:Object(O.jsx)("label",{htmlFor:"attachments",children:"Attachments"})}),Object(O.jsx)(ie.a,{children:Object(O.jsx)(oe.b,{name:"attachments",as:Me,onChange:function(e){return r("attachments",e)},setUploadCallbacks:i,className:"form-input"})})]}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{children:Object(O.jsx)("label",{htmlFor:"assign",children:"Assign"})}),Object(O.jsxs)(ie.a,{children:[Object(O.jsxs)(oe.b,{name:"assigneeId",as:"select",className:"form-input",children:[Object(O.jsx)("option",{value:"",children:"Unassigned"}),n.map((function(e){return Object(O.jsx)("option",{value:e.id,children:e.userName},e.id)}))]}),Object(O.jsx)("span",{className:"form-error",children:Object(O.jsx)(oe.a,{name:"assign",className:"form-error"})})]})]}),Object(O.jsx)(oe.b,{name:"createAnother",type:"checkbox",style:{display:"none"}}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(Q.a,{variant:"primary",type:"submit",disabled:t,children:"Add Issue"}),Object(O.jsx)(Q.a,{variant:"outline-primary",className:"mx-1",disabled:t,onClick:Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r("createAnother",!0),e.next=3,a();case 3:s();case 4:case"end":return e.stop()}}),e)}))),children:"Add And Create Another"})]})]})}})};var Xe=function(e){var t=y(),n=Ue(),a=w("/api/projects/".concat(e.match.params.projectId,"/collaborators"),t.user?t.user.token:null),s=Object(j.a)(a,2),c=s[0],i=(s[1],Object(r.useState)(!1)),l=Object(j.a)(i,2),b=l[0],h=l[1],m=function(){var t=Object(d.a)(u.a.mark((function t(n,r,a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("in new issue page"),t.abrupt("return",e.onCreateAttachmentRequest(e.match.params.projectId,n,r,a));case 2:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),p=function(){var t=Object(d.a)(u.a.mark((function t(r,a){var s,c,i,o,l,d;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=r.attachments,delete r.attachments,c=r.createAnother,delete r.createAnother,t.next=6,e.onSubmit(e.match.params.projectId,r);case 6:return i=t.sent,o=a(null),l=[],s&&s.forEach((function(e){o=a(e);var t=new FormData;t.append("attachments",e),l.push(m(i.id,t,o.progressCb))})),t.next=12,Promise.all(l).then((function(e){return e.map((function(e){return e.data.id}))})).then((function(e){return o.successCb(),e})).catch((function(e){return o.failureCb(e)}));case 12:d=t.sent,e.onAddAttachment(e.match.params.projectId,i.id,d),n.showNotificationWithText("Issue successfully added!"),h(!c);case 16:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return!0===b?Object(O.jsx)(o.a,{to:"/projects/".concat(e.match.params.projectId,"/issues")}):Object(O.jsx)(se.a,{fluid:!0,className:"page",children:Object(O.jsx)(Ge,{onSubmit:p,collaborators:c.data})})};var Ye=function(e){var t=e.render;return Object(O.jsx)(ne,{title:"Issues",bg:"light",expand:"lg",render:function(){return Object(O.jsxs)(Y.a,{children:[t(),Object(O.jsx)($,{to:"issues/new",variant:"outline-dark",className:"m-sm-1",children:"Add New Issue"})]})}})},Qe=n(304),Ze=(n(287),function(e){return Object(O.jsxs)(Qe.a,{bordered:!0,striped:!0,responsive:!0,className:"table",children:[Object(O.jsxs)("thead",{className:"table-header",children:[Object(O.jsx)("tr",{className:"table-header-group",children:Object(O.jsx)("td",{colSpan:"8",children:e.groupName})}),Object(O.jsxs)("tr",{children:[e.headerKeys.map((function(e){return Object(O.jsx)("th",{children:e},"table-header-".concat(e))})),Object(O.jsx)("th",{})]},"table-header")]}),Object(O.jsx)("tbody",{className:"table-body",children:e.data.map((function(t){return Object(O.jsxs)("tr",{children:[e.headerKeys.map((function(e){return Object(O.jsx)("td",{children:t[e]},"".concat(t.id,"-").concat(e))})),Object(O.jsx)("td",{children:e.children?e.children(t):null},"".concat(t.id,"-options"))]},t.id)}))})]})});var $e=function(e){var t=e.listItems,n=e.headerKeys,r=e.groupKey,a=void 0===r?null:r,s=(e.groupValues,e.orderBy,e.filter),c=void 0===s?null:s,i=e.searchText,o=void 0===i?"":i,l=e.searchKeys,u=void 0===l?[]:l,d=e.renderButtons,j=Ce(t,c,o,u),b=Ae(j,a),h=Object.keys(b);return b&&h.length>0?h.map((function(e){return Object(O.jsx)(Ze,{headerKeys:n,data:b[e],groupName:e+"s",children:d})})):Object(O.jsx)(Ze,{headerKeys:n,data:b,groupName:"All",children:d})},et=n(305),tt=function(e){var t=e.projectId,n=e.issue,r=e.onDelete,a=e.onAssign,s=e.onStart,c=e.onClose;return Object(O.jsx)(et.a,{style:{width:"100%"},children:Object(O.jsxs)(De.a,{children:[Object(O.jsx)($,{variant:"primary",to:"/projects/".concat(t,"/issues/").concat(n.id),children:"View"}),Object(O.jsx)(Q.a,{variant:"primary",onClick:function(e){return"unassigned"===n.status?a({projectId:t,issueId:n.id}):"open"===n.status?s({projectId:t,issueId:n.id}):"inprogress"===n.status?c({projectId:t,issueId:n.id}):void 0},disabled:"resolved"===n.status||"closed"===n.status,children:"unassigned"===n.status?"Assign":"open"===n.status||"inprogress"===n.status?"Advance":"resolved"===n.status?"Resolved":"Closed"}),Object(O.jsxs)(Ee.a,{as:De.a,variant:"secondary",title:"Settings",children:[Object(O.jsx)(Be.a.Item,{children:"Edit Issue"}),Object(O.jsx)(Be.a.Item,{onClick:function(){return r({projectId:t,issueId:n.id})},children:"Delete Issue"})]})]})})},nt=["projectId","issue"];var rt=function(e){var t=e.projectId,n=e.issue,r=Object(M.a)(e,nt);return Object(O.jsxs)(Pe.a,{style:{height:"100%",width:"100%",display:"flex",flexDirection:"row",alignItems:"center"},children:[Object(O.jsxs)(Pe.a.Body,{style:{flex:5},children:[Object(O.jsx)(Pe.a.Title,{children:n.title}),Object(O.jsx)(Pe.a.Text,{children:n.description})]}),Object(O.jsxs)(Pe.a.Body,{style:{flex:1,height:"100%",borderLeft:"1px solid black"},children:[Object(O.jsx)(Pe.a.Title,{children:"Category"}),Object(O.jsx)(Pe.a.Text,{children:n.category})]}),Object(O.jsxs)(Pe.a.Body,{style:{flex:1,borderLeft:"1px solid black"},children:[Object(O.jsx)(Pe.a.Title,{children:"Priority"}),Object(O.jsx)(Pe.a.Text,{children:n.priority})]}),Object(O.jsxs)(Pe.a.Body,{style:{flex:1,borderLeft:"1px solid black"},children:[Object(O.jsx)(Pe.a.Title,{children:"Status"}),Object(O.jsx)(Pe.a.Text,{children:n.status})]}),Object(O.jsxs)(Pe.a.Body,{style:{flex:1,borderLeft:"1px solid black"},children:[Object(O.jsx)(Pe.a.Title,{children:"Assigned"}),Object(O.jsx)(Pe.a.Text,{children:n.assignee?n.assignee:"None"})]}),Object(O.jsx)(Pe.a.Body,{style:{flex:2,height:"100%",borderLeft:"1px solid black"},children:Object(O.jsx)(tt,Object(b.a)({projectId:t,issue:n},r))})]})},at=["projectId","issueList","groupBy","orderBy","filter","searchText","searchKeys"],st=["title","category","priority","status","assignee"],ct={priority:["trivial","low","regular","high","critical"],category:["other","task","feature","bug"],status:["closed","resolved","inprogresss","open","unassigned"]};var it=function(e){var t=e.projectId,n=e.issueList,r=e.groupBy,a=e.orderBy,s=e.filter,c=e.searchText,i=e.searchKeys,o=Object(M.a)(e,at);return n&&n.length>0?"2"===o.viewAs?Object(O.jsx)($e,{listItems:n,headerKeys:st,groupKey:r,groupValues:ct[r],orderBy:a,filter:s,searchText:c,searchKeys:i,renderButtons:function(e){return Object(O.jsx)(tt,Object(b.a)({projectId:t,issue:e},o))}}):Object(O.jsx)(Te,{listItems:n,groupKey:r,groupValues:ct[r],orderBy:a,filter:s,searchText:c,searchKeys:i,render:function(e){return Object(O.jsx)(rt,Object(b.a)({projectId:t,issue:e},o))}}):Object(O.jsxs)("div",{className:"empty-list-message",children:[Object(O.jsx)("span",{children:"There are currently no issues to display for this project. "}),Object(O.jsx)("a",{href:"issues/new",children:"Click here "}),Object(O.jsx)("span",{children:"to create an issue."})]})},ot=n(43);n(288);function lt(e){var t=e.checked,n=e.name,r=e.id,a=e.onClick;return Object(O.jsx)("div",{className:"checkmark",id:r,name:n,onClick:a,children:t?"\u2713":""})}var ut=function(e){var t=Object(r.useState)(!1),n=Object(j.a)(t,2),a=n[0],s=n[1],c=function(t,n){var r=Object.keys(e.filters),a=Object(b.a)({},e.filters);""===t?r.forEach((function(t){Object.keys(e.filters[t]).forEach((function(e){a[t][e]=n}))})):Object.keys(e.filters[t]).forEach((function(e){a[t][e]=n})),e.onSelect("filter",a)},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";c(e,!0)},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";c(e,!1)},l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=Object(b.a)({},e.filters),r=!0;if(""===t){var a=Object.keys(e.filters);a.forEach((function(t){Object.keys(e.filters[t]).forEach((function(e){!0===n[t][e]&&(r=!1)}))}))}else Object.keys(e.filters[t]).forEach((function(e){!0===n[t][e]&&(r=!1)}));return r},u=function(e){l(e)?i(e):o(e)};return Object(O.jsxs)(De.a,{className:e.className,children:[Object(O.jsxs)(Ee.a,{className:"m-1",variant:"outline-primary",title:"Group by",onSelect:function(t){e.onSelect("group",t)},children:[Object(O.jsx)(Be.a.Item,{eventKey:"none",children:"None"}),Object(O.jsx)(Be.a.Item,{eventKey:"category",children:"Category"}),Object(O.jsx)(Be.a.Item,{eventKey:"status",children:"Status"}),Object(O.jsx)(Be.a.Item,{eventKey:"priority",children:"Priority"})]}),Object(O.jsxs)(Ee.a,{className:"m-1",variant:"outline-primary",title:"Order",onSelect:function(t){e.onSelect("order",t)},children:[Object(O.jsx)(Be.a.Item,{eventKey:"asc",children:"Ascending"}),Object(O.jsx)(Be.a.Item,{eventKey:"desc",children:"Desccending"})]}),Object(O.jsx)(Ee.a,{show:a,className:"filterDropdown m-1",variant:"outline-primary",title:"Filter",menuAlign:"right",onSelect:function(t){var n=t.split(" "),r=Object(j.a)(n,2),a=r[0],s=r[1],c=Object(b.a)({},e.filters[a]);c[s]=!c[s];var i=Object(b.a)(Object(b.a)({},e.filters),{},Object(ot.a)({},a,c));e.onSelect("filter",i)},onToggle:function(e,t,n){"select"!==n.source&&s(e)},children:Object(O.jsxs)("div",{className:"filters",children:[Object(O.jsxs)("div",{className:"dropdown-item-group",children:[Object(O.jsx)(Be.a.Header,{children:"Category"}),Object(O.jsxs)(Be.a.Item,{eventKey:"category bug",children:[Object(O.jsx)(lt,{name:"bug",id:"checkbox-bug",checked:e.filters.category.bug}),Object(O.jsx)("label",{htmlFor:"checkbox-bug",children:"Bug"})]}),Object(O.jsxs)(Be.a.Item,{eventKey:"category feature",children:[Object(O.jsx)(lt,{name:"feature",id:"checkbox-feature",checked:e.filters.category.feature}),Object(O.jsx)("label",{htmlFor:"checkbox-feature",children:"Feature"})]}),Object(O.jsxs)(Be.a.Item,{eventKey:"category task",children:[Object(O.jsx)(lt,{name:"task",id:"checkbox-task",checked:e.filters.category.task}),Object(O.jsx)("label",{htmlFor:"checkbox-task",children:"Task"})]}),Object(O.jsxs)(Be.a.Item,{eventKey:"category other",children:[Object(O.jsx)(lt,{name:"other",id:"checkbox-other",checked:e.filters.category.other}),Object(O.jsx)("label",{htmlFor:"checkbox-other",children:"Other"})]}),Object(O.jsx)(Be.a.ItemText,{onClick:function(){u("category")},children:l()?"All":"Clear"})]}),Object(O.jsxs)("div",{className:"dropdown-item-group",children:[Object(O.jsx)(Be.a.Header,{children:"Priority"}),Object(O.jsxs)(Be.a.Item,{eventKey:"priority critical",children:[Object(O.jsx)(lt,{name:"critical",id:"checkbox-critical",checked:e.filters.priority.critical}),Object(O.jsx)("label",{htmlFor:"checkbox-critical",children:"Critical"})]}),Object(O.jsxs)(Be.a.Item,{eventKey:"priority high",children:[Object(O.jsx)(lt,{name:"high",id:"checkbox-high",checked:e.filters.priority.high}),Object(O.jsx)("label",{htmlFor:"checkbox-high",children:"High"})]}),Object(O.jsxs)(Be.a.Item,{eventKey:"priority regular",children:[Object(O.jsx)(lt,{name:"regular",id:"checkbox-regular",checked:e.filters.priority.regular}),Object(O.jsx)("label",{htmlFor:"checkbox-regular",children:"Regular"})]}),Object(O.jsxs)(Be.a.Item,{eventKey:"priority low",children:[Object(O.jsx)(lt,{name:"low",id:"checkbox-low",checked:e.filters.priority.low}),Object(O.jsx)("label",{htmlFor:"checkbox-low",children:"Low"})]}),Object(O.jsxs)(Be.a.Item,{eventKey:"priority trivial",children:[Object(O.jsx)(lt,{name:"trivial",id:"checkbox-trivial",checked:e.filters.priority.trivial}),Object(O.jsx)("label",{htmlFor:"checkbox-trivial",children:"Trivial"})]}),Object(O.jsx)(Be.a.ItemText,{onClick:function(){u("priority")},children:l()?"All":"Clear"})]}),Object(O.jsxs)("div",{className:"dropdown-item-group",children:[Object(O.jsx)(Be.a.Header,{children:"Status"}),Object(O.jsxs)(Be.a.Item,{eventKey:"status unassigned",children:[Object(O.jsx)(lt,{name:"unassigned",id:"checkbox-unassigned",checked:e.filters.status.unassigned}),Object(O.jsx)("label",{htmlFor:"checkbox-unassigned",children:"Unassigned"})]}),Object(O.jsxs)(Be.a.Item,{eventKey:"status open",children:[Object(O.jsx)(lt,{name:"open",id:"checkbox-open",checked:e.filters.status.open}),Object(O.jsx)("label",{htmlFor:"checkbox-open",children:"Open"})]}),Object(O.jsxs)(Be.a.Item,{eventKey:"status inprogress",children:[Object(O.jsx)(lt,{name:"inprogress",id:"checkbox-inprogress",checked:e.filters.status.inprogress}),Object(O.jsx)("label",{htmlFor:"checkbox-inprogress",children:"In-progress"})]}),Object(O.jsxs)(Be.a.Item,{eventKey:"status resolved",children:[Object(O.jsx)(lt,{name:"resolved",id:"checkbox-resolved",checked:e.filters.status.resolved}),Object(O.jsx)("label",{htmlFor:"checkbox-resolved",children:"Resolved"})]}),Object(O.jsxs)(Be.a.Item,{eventKey:"status closed",children:[Object(O.jsx)(lt,{name:"closed",id:"checkbox-closed",checked:e.filters.status.closed}),Object(O.jsx)("label",{htmlFor:"checkbox-closed",children:"Closed"})]}),Object(O.jsx)(Be.a.ItemText,{onClick:function(){u("status")},children:l()?"All":"Clear"})]}),Object(O.jsx)(Be.a.ItemText,{onClick:function(){l()?i():o()},children:l()?"Check All":"Clear All"})]})})]})},dt=n(308),jt=(n(289),["onEdit","name","isEditing"]),bt=function(e,t){return function(n){var a=n.onEdit,s=n.name,c=n.isEditing,i=void 0!==c&&c,o=Object(M.a)(n,jt),l=Object(r.useState)(i),u=Object(j.a)(l,2),d=u[0],h=u[1],m=Object(r.useState)(o.value),p=Object(j.a)(m,2),f=p[0],x=p[1],v=Object(r.useRef)();Object(r.useEffect)((function(){v&&v.current&&v.current.focus()}),[d,i]);var g=function(e){"Enter"===e.key&&w(e)},y=function(e){x(e.target.value)},w=function(e){e.preventDefault(),a(Object(ot.a)({},v.current.name,f)),h(!1)};return d?Object(O.jsx)(ie.a,{xs:o.xs,sm:o.sm,md:o.md,lg:o.lg,children:Object(O.jsx)("form",{onBlur:function(){o.onBlur&&o.onBlur()||h(!1)},onSubmit:w,children:"text"===t?Object(O.jsx)("input",{ref:v,name:s,type:t,defaultValue:f,onChange:y}):"textarea"===t?Object(O.jsx)("textarea",{ref:v,name:s,defaultValue:f,rows:5,cols:75,onChange:y,onKeyPress:g}):"select"===t?Object(O.jsx)("select",{ref:v,name:s,defaultValue:f,onChange:y,onKeyPress:g,children:o.options&&o.options.map((function(e,t){return Object(O.jsx)("option",{value:e,children:e},t)}))}):null})}):Object(O.jsx)("div",{className:"component-wrapper",children:Object(O.jsx)(e,Object(b.a)(Object(b.a)({},o),{},{onClick:function(){i||h(!0)},children:o.children}))})}},ht=function(e){var t=function(e,t,n){for(var r=0,a=0;r<n&&a>=0;)a=e.indexOf(t,a+1),r++;return a}(e," ",5);return e.slice(0,t)},mt=n.p+"static/media/edit-icon-png-small.4aeb2e4d.png",pt={width:"50vw",height:"100%",margin:"1em"},ft=a.a.forwardRef((function(e,t){var n=e.onClick;return Object(O.jsx)("img",{alt:"",src:mt,width:"25",height:"25",ref:t,onClick:n})}));var xt=function(e){var t=Object(r.useState)(null),n=Object(j.a)(t,2),a=n[0],s=n[1],c=bt(ie.a,"textarea"),i=function(e){s(e)},o=function(t){e.onEdit(a,t),s(null)};return Object(O.jsx)(Te,{listItems:e.comments,render:function(t){return Object(O.jsxs)(ce.a,{style:pt,children:[Object(O.jsx)(ie.a,{lg:11,md:11,sm:10,xs:9,children:"Posted By: "+t.creator+" on "+ht(new Date(t.created_at).toString())}),Object(O.jsx)(ie.a,{lg:1,md:1,sm:2,xs:3,children:Object(O.jsxs)(Be.a,{onSelect:function(n){return r=n,a=t.id,"delete"===r?e.onDelete({commentId:a}):"edit"===r?i(a):void 0;var r,a},children:[Object(O.jsx)(Be.a.Toggle,{as:ft}),Object(O.jsxs)(Be.a.Menu,{children:[Object(O.jsx)(Be.a.Item,{eventKey:"edit",children:"Edit"}),Object(O.jsx)(Be.a.Item,{eventKey:"delete",children:"Delete"})]})]})}),Object(O.jsx)(c,{lg:11,md:11,sm:11,xs:11,name:"body",value:t.body,isEditing:a===t.id,onEdit:o,onBlur:function(){return s(null)},children:t.body})]},t.id)}})},Ot=n(307);var vt=function(e){var t=e.show,n=e.heading,r=e.closeButtonText,a=e.submitButtonText,s=e.onSubmit,c=e.onClose,i=e.render,o=e.renderData,l=e.formId,u=void 0===l?null:l;return Object(O.jsxs)(Ot.a,{show:t,onHide:c,children:[Object(O.jsx)(Ot.a.Header,{closeButton:!0,children:Object(O.jsx)(Ot.a.Title,{children:n||""})}),Object(O.jsx)(Ot.a.Body,{children:i({data:o})}),Object(O.jsxs)(Ot.a.Footer,{children:[Object(O.jsx)(Q.a,{variant:"secondary",onClick:c,children:r||"Close"}),Object(O.jsx)(Q.a,{variant:"primary",type:"submit",form:u,onClick:s,children:a||"Submit"})]})]})};var gt=function(){var e=Object(r.useState)(!1),t=Object(j.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)({}),c=Object(j.a)(s,2),i=c[0],o=c[1],l=function(){a(!1)};return{show:function(e){o(e),a(!0)},RenderDialogBox:function(e){return Object(O.jsx)(vt,Object(b.a)(Object(b.a)({},e),{},{onSubmit:function(t){var n=t;n.preventDefault();var r=n.target.form&&function(e){if(0===e.length)return{};var t={};return e.forEach((function(e){t[e.name]=e.value})),t}(n.target.form.childNodes);"function"===typeof e.onSubmit&&e.onSubmit({data:i,values:r}),l()},show:n,renderData:i,onClose:l}))}}},yt=(n(290),["title","linkUrl"]);var wt=function(e){var t=e.title,n=e.linkUrl,r=Object(M.a)(e,yt);return Object(O.jsx)(ne,Object(b.a)(Object(b.a)({title:"Issue: "+t},r),{},{bg:"light",sticky:"top",render:function(){return Object(O.jsxs)(Y.a,{children:[r.render&&"function"===typeof r.render&&r.render(),Object(O.jsx)($,{variant:"outline-dark",to:n?n+"/new":"./new",children:"Add New Issue"})]})}}))};n(291);var kt=function(e){var t=Object(r.useState)(!1),n=Object(j.a)(t,2),a=n[0],s=n[1];return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("ul",{className:"attachments-list",children:function(){var t=[];return e.attachments&&e.attachments.forEach((function(n,r){t.push(Object(O.jsxs)("li",{children:[Object(O.jsx)("span",{children:n.filename})," ",Object(O.jsx)("a",{href:n.data,download:n.filename,children:"Download"})," ",Object(O.jsx)("button",{className:"link",onClick:function(){return e.onDelete(n.id)},children:"Remove"})]},"attachment-".concat(r)))})),t}()}),a?Object(O.jsx)(Me,{sendRequest:e.onCreate,onComplete:e.onComplete,onClose:function(){s(!1)}}):Object(O.jsx)("button",{className:"link",onClick:function(){s(!0)},children:"Add Attachment"})]})};n(292);var Nt=function(e){return Object(O.jsx)(oe.d,{initialValues:{title:e.initialTitle,description:e.initialDescription,category:e.initialCategory,priority:e.initialPriority},onSubmit:function(t){e.onSubmit(t)},validationSchema:pe,children:function(){return Object(O.jsxs)(oe.c,{id:"edit-issue-form",children:[Object(O.jsx)(ce.a,{className:"justify-content-center title",children:Object(O.jsxs)(ie.a,{children:[Object(O.jsx)(oe.b,{name:"title",type:"text",className:"form-input"}),Object(O.jsx)("span",{className:"form-error",children:Object(O.jsx)(oe.a,{name:"title"})})]})}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{lg:4,md:4,sm:4,xs:4,children:Object(O.jsx)("label",{htmlFor:"description",children:"Description"})}),Object(O.jsxs)(ie.a,{lg:6,md:6,sm:6,xs:6,children:[Object(O.jsx)(oe.b,{name:"description",as:"textarea",className:"form-input"}),Object(O.jsx)("span",{className:"form-error",children:Object(O.jsx)(oe.a,{name:"description",className:"form-error"})})]})]}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{lg:4,md:4,sm:4,xs:4,children:Object(O.jsx)("label",{htmlFor:"category",children:"Category"})}),Object(O.jsxs)(ie.a,{lg:6,md:6,sm:6,xs:6,children:[Object(O.jsxs)(oe.b,{name:"category",as:"select",className:"form-input",children:[Object(O.jsx)("option",{value:"bug",children:"Bug"}),Object(O.jsx)("option",{value:"feature",children:"Feature"}),Object(O.jsx)("option",{value:"task",children:"Task"}),Object(O.jsx)("option",{value:"other",children:"Other"})]}),Object(O.jsx)("span",{className:"form-error",children:Object(O.jsx)(oe.a,{name:"category",className:"form-error"})})]})]}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{lg:4,md:4,sm:4,xs:4,children:Object(O.jsx)("label",{htmlFor:"priority",children:"Priority"})}),Object(O.jsxs)(ie.a,{lg:6,md:6,sm:6,xs:6,children:[Object(O.jsxs)(oe.b,{name:"priority",as:"select",className:"form-input",children:[Object(O.jsx)("option",{value:"trivial",children:"Trivial"}),Object(O.jsx)("option",{value:"low",children:"Low"}),Object(O.jsx)("option",{value:"regular",children:"Regular"}),Object(O.jsx)("option",{value:"high",children:"High"}),Object(O.jsx)("option",{value:"critical",children:"Critical"})]}),Object(O.jsx)("span",{className:"form-error",children:Object(O.jsx)(oe.a,{name:"priority",className:"form-error"})})]})]})]})}})},It=["issue","onEdit"];var St=function(e){var t=e.issue,n=e.onEdit,a=Object(M.a)(e,It),s=y(),c=w("/api/projects/".concat(a.match.params.projectId,"/issues/").concat(a.match.params.issueId,"/attachments"),s.user?s.user.token:null,t.attachmentHandles),i=Object(j.a)(c,3),o=i[0],l=(i[1],i[2]),h=w("/api/projects/".concat(a.match.params.projectId,"/issues/").concat(a.match.params.issueId,"/comments"),s.user?s.user.token:null),m=Object(j.a)(h,2),p=m[0],f=m[1],x=Object(r.useState)(!1),v=Object(j.a)(x,2),g=v[0],k=v[1],N=gt(),I=N.show,S=N.RenderDialogBox,C=bt(ie.a,"select"),A=function(){var e=Object(d.a)(u.a.mark((function e(r){var s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s in r)r[s]===t[s]&&delete r[s];return e.next=3,n(a.match.params.projectId,t.id,r);case 3:k(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(d.a)(u.a.mark((function e(n){var r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r=n.target[1].value,e.next=4,R.addComment(a.match.params.projectId,t.id,r,s.user.token);case 4:c=e.sent,f((function(e){var t=e.data.slice();return t.push(c),Object(b.a)(Object(b.a)({},e),{},{data:t})})),document.querySelector("textarea#comment").value="";case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(d.a)(u.a.mark((function e(n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.data,console.log("Deleting comment",r),e.next=4,R.deleteComment(a.match.params.projectId,t.id,r.commentId,s.user.token);case 4:f((function(e){var t=e.data.slice(),n=t.findIndex((function(e){return e.id===r.commentId}));return-1!==n&&t.splice(n,1),Object(b.a)(Object(b.a)({},e),{},{data:t})}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(d.a)(u.a.mark((function e(n,r){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.updateComment(a.match.params.projectId,t.id,n,r.body,s.user.token);case 2:c=e.sent,f((function(e){var t=e.data.slice(),r=t.findIndex((function(e){return e.id===n}));return t[r]=c,Object(b.a)(Object(b.a)({},e),{},{data:t})}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),E="unassigned"===t.status?"Assign Issue":"open"===t.status?"Advance Issue":"inprogress"===t.status?"Close Issue":t.status;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(wt,{title:t.title,render:function(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(Q.a,{className:"stick-left",onClick:function(){a.history.goBack()},children:"Back to All Issues"}),g&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(Q.a,{variant:"outline-dark",className:"mx-1",form:"edit-issue-form",type:"submit",children:"Save"}),Object(O.jsx)(Q.a,{variant:"outline-dark",className:"mx-1",onClick:function(){return k(!1)},children:"Cancel"})]}),!g&&Object(O.jsx)(Q.a,{variant:"outline-dark",className:"mx-1",onClick:function(){k(!0)},children:"Edit"})]})}}),Object(O.jsxs)(se.a,{className:"IssueDetails",fluid:!0,children:[Object(O.jsx)(S,{heading:"Delete Project",closeButtonText:"Cancel",submitButtonText:"Delete",onSubmit:P,render:function(e){return"Are you sure you would like to delete this comment: "+e.data.commentId+"?"}}),g?Object(O.jsx)(Nt,{initialTitle:t.title,initialDescription:t.description,initialCategory:t.category,initialPriority:t.priority,onSubmit:A}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(ce.a,{className:"justify-content-center title",children:Object(O.jsx)("h3",{children:t.title})}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{lg:4,md:4,sm:4,xs:4,children:"Description"}),Object(O.jsx)(ie.a,{as:"p",lg:6,md:6,sm:6,xs:6,name:"description",children:t.description})]}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{lg:4,md:4,sm:4,xs:4,children:"Category"}),Object(O.jsx)(C,{as:"p",lg:6,md:6,sm:6,xs:6,value:t.category,name:"category",onEdit:A,options:["bug","feature","task","other"],children:t.category})]}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{lg:4,md:4,sm:4,xs:4,children:"Priority"}),Object(O.jsx)(C,{as:"p",lg:6,md:6,sm:6,xs:6,value:t.priority,name:"priority",onEdit:A,options:["critical","high","regular","low","trivial"],children:t.priority})]})]}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{lg:4,md:4,sm:4,xs:4,children:"Status"}),Object(O.jsxs)(ie.a,{as:"p",lg:6,md:6,sm:6,xs:6,children:[t.status,Object(O.jsx)(Q.a,{className:"mx-1",size:"sm",hidden:"resolved"===t.status||"closed"===t.status,onClick:function(){return"unassigned"===t.status?a.onAssign({projectId:a.match.params.projectId,issueId:t.id}):"open"===t.status?a.onStart({projectId:a.match.params.projectId,issueId:t.id}):a.onClose({projectId:a.match.params.projectId,issueId:t.id})},children:E})]})]}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{lg:4,md:4,sm:4,xs:4,children:"Created on"}),Object(O.jsx)(ie.a,{as:"p",lg:6,md:6,sm:6,xs:6,children:ht(new Date(t.created_at).toString())})]}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{lg:4,md:4,sm:4,xs:4,children:"Created by"}),Object(O.jsx)(ie.a,{as:"p",lg:6,md:6,sm:6,xs:6,children:t.creator})]}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{lg:4,md:4,sm:4,xs:4,children:"Assigned to"}),Object(O.jsx)(ie.a,{as:"p",lg:6,md:6,sm:6,xs:6,children:t.assignee?t.assignee:"Unassigned"})]}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{lg:4,md:4,sm:4,xs:4,children:"Assigned on"}),Object(O.jsx)(ie.a,{as:"p",lg:6,md:6,sm:6,xs:6,children:t.opened_at?ht(new Date(t.opened_at).toString()):"N/A"})]}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{lg:4,md:4,sm:4,xs:4,children:"Resolved/Closed on"}),Object(O.jsx)(ie.a,{as:"p",lg:6,md:6,sm:6,xs:6,children:t.closed_at?ht(new Date(t.closed_at).toString()):"N/A"})]}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{lg:4,md:4,sm:4,xs:4,children:"Attachments"}),Object(O.jsx)(ie.a,{lg:6,md:6,sm:6,xs:6,id:"attachments-content",children:Object(O.jsx)(kt,{attachments:o.data,onCreate:function(e,n){return a.onCreateAttachmentRequest(a.match.params.projectId,t.id,e,n)},onComplete:function(e){console.log(e),a.onAddAttachment(a.match.params.projectId,t.id,e),l()}})})]}),Object(O.jsx)($,{to:"".concat(t.id,"/log"),className:"my-3",children:"View Issue Log"}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{lg:4,md:4,sm:4,xs:4,children:Object(O.jsx)(Q.a,{variant:"outline-primary",type:"submit",form:"add-comment",children:"Add Comment"})}),Object(O.jsx)(ie.a,{lg:4,md:4,sm:4,xs:4,children:Object(O.jsx)(dt.a,{id:"add-comment",onSubmit:T,children:Object(O.jsx)(dt.a.Group,{controlId:"comment",children:Object(O.jsx)(dt.a.Control,{as:"textarea",placeholder:"Enter comment"})})})})]}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{lg:4,md:4,sm:4,xs:4,children:"Comments"}),Object(O.jsx)(xt,{comments:p.data,onEdit:D,onDelete:I})]})]})]})},Ct="list_filter_params";function At(e){localStorage.setItem(Ct,JSON.stringify(e))}var Tt=function(e){var t=Object(r.useState)(e),n=Object(j.a)(t,2),a=n[0],s=n[1];return Object(r.useEffect)((function(){var t=JSON.parse(localStorage.getItem(Ct));t?s(t):At(e)}),[]),Object(r.useEffect)((function(){At(a)}),[a]),[a,function(e,t){s((function(n){return Object(b.a)(Object(b.a)({},n),{},Object(ot.a)({},e,t))}))}]};var Pt=function(e){var t=e.formId,n=e.fieldName,r=e.selectItems,a=e.itemKey,s=e.initialValues,c=e.onSubmit,i=r.map((function(e,t){return Object(O.jsx)("option",{id:"option".concat(t),value:e.id,children:e[a]},"option".concat(t))}));return Object(O.jsx)(oe.d,{initialValues:s,onSubmit:c,children:function(){return Object(O.jsx)(oe.c,{id:t,children:Object(O.jsx)(oe.b,{name:n,as:"select",children:i})})}})};var Dt=function(e){return Object(O.jsxs)(dt.a,{inline:!0,noValidate:!0,onSubmit:function(t){t.preventDefault(),e.onSubmit(t.target.firstChild.value)},className:e.className,children:[Object(O.jsx)(le.a,{type:"text",name:"search",placeholder:"Search",className:"mr-sm-2"}),Object(O.jsx)(Q.a,{type:"submit",variant:"outline-info",children:"Search"})]})},Et=n(306),Bt=["radioValue","onSelect"];var Lt=function(e){var t=e.radioValue,n=e.onSelect,r=Object(M.a)(e,Bt);return Object(O.jsx)(De.a,{toggle:!0,className:"mx-2",children:r.radios&&r.radios.map((function(e,r){return Object(O.jsx)(Et.a,{type:"radio",variant:"secondary",name:"radio",value:e.value,checked:t===e.value,onChange:function(e){return n(e.currentTarget.value)},children:e.name},r)}))})},Ft=n(15),Rt=n(16),Kt=function(){function e(t){Object(Ft.a)(this,e),this.collaborators=t}return Object(Rt.a)(e,[{key:"get",value:function(e){if(0!==this.collaborators.length)return this.collaborators.find((function(t){return t.id===e}))}}]),e}(),qt=function(e,t,n,r,a){var s="";switch(e){case"INSERT":s+=t.userName,s+=" created this issue - ",s+=n;break;case"UPDATE":s+=t.userName;var c,i=function(e,t){for(var n=JSON.parse(e),r=JSON.parse(t),a={},s=0,c=Object.keys(n);s<c.length;s++){var i=c[s];n[i]!==r[i]&&(a[i]={oldData:n[i],newData:r[i]})}return a}(r,a),o=Object.keys(i).filter((function(e){return"assigneeId"!==e||"creatorId"!==e})),l=0,u=Object(Ie.a)(o);try{for(u.s();!(c=u.n()).done;){var d=c.value;s+="assignee"===d?" assigned this issue ":" changed the "+d+" of this issue",s+=" to '"+i[d].newData+"'",s+=++l<o.length?" and ":""}}catch(j){u.e(j)}finally{u.f()}s+=" - "+n;break;case"DELETE":s+=t.userName,s+=" deleted this issue - ",s+=n}return s};var Vt=function(e){var t=y(),n=w("/api/projects/".concat(e.match.params.projectId,"/issues/").concat(e.match.params.issueId,"/reports"),t.user?t.user.token:null),r=Object(j.a)(n,1)[0];return Object(O.jsx)(se.a,{fluid:!0,children:Object(O.jsx)(Te,{listItems:r.data,render:function(t){if(!t||!e.collaborators||0===e.collaborators.length)return null;var n=ht(new Date(t.createdAt).toString()),r=new Kt(e.collaborators).get(t.createdBy),a=qt(t.action,r,n,t.oldData,t.newData);return Object(O.jsx)("div",{children:a})}})})},Ut=["issues"],_t={category:{bug:!0,feature:!0,task:!0,other:!0},priority:{critical:!0,high:!0,regular:!0,low:!0,trivial:!0},status:{unassigned:!0,open:!0,inprogress:!0,resolved:!0,closed:!0}};var Ht=function(e){var t=e.issues,n=Object(M.a)(e,Ut),a=y(),s=Ue(),c=w("/api/projects/".concat(n.match.params.projectId,"/collaborators"),a.user?a.user.token:null),i=Object(j.a)(c,1)[0],l=gt(),h=l.show,m=l.RenderDialogBox,p=gt(),f=p.show,x=p.RenderDialogBox,v=gt(),g=v.show,k=v.RenderDialogBox,N=gt(),I=N.show,S=N.RenderDialogBox,C=Tt({order:"desc",group:"category",filter:_t,search:""}),A=Object(j.a)(C,2),T=A[0],P=A[1],D=Object(r.useState)("1"),E=Object(j.a)(D,2),B=E[0],L=E[1],F=function(e){L(e)},R=function(){var e=Object(d.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.data,e.next=3,n.onDelete(r.projectId,r.issueId);case 3:s.showNotificationWithText("Issue Successfully Deleted!");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(d.a)(u.a.mark((function e(t){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.data,a=t.values,e.next=3,n.onAssign(r.projectId,r.issueId,a.collaboratorId);case 3:s.showNotificationWithText("Issue Successfully Assigned!");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(d.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.data,e.next=3,n.onStart(r.projectId,r.issueId);case 3:s.showNotificationWithText("Issue Successfully Advanced to In-Progress!");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(d.a)(u.a.mark((function e(t){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.data,a=t.values,e.next=3,n.onClose(r.projectId,r.issueId,a.status);case 3:s.showNotificationWithText("Issue Completed!");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(m,{heading:"Delete Issue",submitButtonText:"Delete",onSubmit:R,render:function(e){return"Are you sure you would like to delete issue "+e.data.issueId}}),Object(O.jsx)(x,{heading:"Assign Issue",submitButtonText:"Assign",formId:"project-collaborators",onSubmit:K,render:function(){return Object(O.jsx)(Pt,{formId:"project-collaborators",fieldName:"collaboratorId",initialValues:{collaboratorId:""},selectItems:i.data,itemKey:"userName"})}}),Object(O.jsx)(k,{heading:"Begin Issue",submitButtonText:"Advance",onSubmit:q,render:function(e){return"Are you sure you would like to begin issue "+e.data.issueId+'? The status of this issue will be advanced to "inprogress".'}}),Object(O.jsx)(S,{heading:"Complete Issue",submitButtonText:"Complete",formId:"complete-status",onSubmit:V,render:function(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{children:"Please select how you would like to complete this issue? "}),Object(O.jsx)(Pt,{formId:"complete-status",fieldName:"status",initialValues:{status:""},selectItems:[{status:"closed"},{status:"resolved"}],itemKey:"status"})]})}}),Object(O.jsxs)(o.d,{children:[Object(O.jsx)(o.b,{path:n.match.path,exact:!0,render:function(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(Ye,{render:function(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(Q.a,{className:"stick-left",variant:"outline-primary",onClick:function(){n.history.push("/projects")},children:"Back to Projects"}),Object(O.jsx)("div",{children:"View style:"}),Object(O.jsx)(Lt,{radioValue:B,radios:[{name:"List",value:"1"},{name:"Table",value:"2"}],onSelect:F}),Object(O.jsx)(Dt,{className:"search-bar",onSubmit:function(e){P("search",e)}}),Object(O.jsx)(ut,{className:"filter-controls",filters:T.filter,onSelect:P})]})}}),Object(O.jsx)(it,{projectId:n.match.params.projectId,collaborators:i.data,issueList:t,viewAs:B,groupBy:T.group,orderBy:T.order,filter:T.filter,searchText:T.search,searchKeys:["title","description"],onDelete:h,onAssign:f,onStart:g,onClose:I})]})}}),Object(O.jsx)(o.b,{path:"".concat(n.match.path,"/:issueId"),exact:!0,render:function(e){var r=t.findIndex((function(t){return t.id===Number(e.match.params.issueId)})),a=-1!==r?t[r]:null;if(a)return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(St,Object(b.a)(Object(b.a)({},e),{},{issue:a,collaborators:i.data,onEdit:n.onEdit,onDelete:h,onAssign:f,onStart:g,onClose:I,onCreateAttachmentRequest:n.onCreateAttachmentRequest,onAddAttachment:n.onAddAttachment}))})}}),Object(O.jsx)(o.b,{path:"".concat(n.match.path,"/:issueId/log"),exact:!0,render:function(e){var r=t.findIndex((function(t){return t.id===Number(e.match.params.issueId)})),a=-1!==r?t[r]:null,s=e.match.url.split("/");if(s.pop(),s.pop(),a)return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(wt,{title:a.title,linkUrl:s.join("/"),render:function(){return Object(O.jsx)(Q.a,{className:"stick-left",onClick:function(){n.history.goBack()},children:"Back to Issue Details"})}}),Object(O.jsx)(Vt,Object(b.a)({collaborators:i.data},e))]})}})]})]})},Wt=["project"];var Jt=function(e){var t=e.project,n=Object(M.a)(e,Wt),r=y(),a=w("/api/projects/".concat(n.match.params.projectId,"/collaborators"),r.user?r.user.token:null),s=Object(j.a)(a,1)[0],c=w("/api/projects/".concat(n.match.params.projectId,"/reports"),r.user?r.user.token:null),i=Object(j.a)(c,1)[0],o=bt(ie.a,"text"),l=bt(ie.a,"textarea"),b=function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.updateProject(n.match.params.projectId,r.user.token,t);case 2:a=e.sent,console.log(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)(se.a,{fluid:!0,children:[Object(O.jsx)(ce.a,{className:"justify-content-center",children:Object(O.jsx)(o,{as:"h3",value:t.name,name:"name",onEdit:b,children:t.name})}),Object(O.jsx)(ce.a,{className:"justify-content-center",children:Object(O.jsx)(l,{as:"p",value:t.description,name:"description",onEdit:b,children:t.description})}),Object(O.jsx)(ce.a,{children:Object(O.jsx)(ie.a,{as:"h5",children:"Collaborators:"})}),s&&s.data.map((function(e,t){return Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{style:{textAlign:"right"},children:"".concat(e.firstName," ").concat(e.lastName)}),Object(O.jsx)(ie.a,{style:{textAlign:"left"},children:e.userName})]},t)})),Object(O.jsx)(ce.a,{children:Object(O.jsx)(ie.a,{as:"h5",children:"Issues:"})}),Object(O.jsx)(ce.a,{style:{justifyContent:"center"},children:"There are ".concat(t.issues&&t.issues.length," issues related to this project")}),Object(O.jsx)(ce.a,{style:{justifyContent:"center"},children:Object(O.jsx)(ie.a,{as:"h5",children:"Project Log:"})}),Object(O.jsx)(ce.a,{style:{justifyContent:"center"},children:Object(O.jsx)(Te,{listItems:i.data,render:function(e){if(!e||!n.collaborators||0===n.collaborators.length)return null;var t=ht(new Date(e.createdAt).toString()),r=new Kt(s.data),a=r.get(e.createdBy),c=JSON.parse(e.newData||e.oldData).collaboratorId,i=JSON.parse(e.oldData),o=JSON.parse(e.newData),l=r.get(c),u=function(e,t,n,r,a){var s="";switch(e){case"INSERT_ISSUE":s+=t.userName,s+=" created an issue (#",s+=a.newData.issueId,s+=") for this project - ";break;case"RESOLVE_ISSUE":s+=t.userName,s+=" resolved an issue (#",s+=a.newData.issueId,s+=") for this project - ";break;case"DELETE_ISSUE":s+=t.userName,s+=" deleted an issue (#",s+=a.oldData.issueId,s+=") for this project - ";break;case"UPDATE":s+=t.userName,s+=" updated the details of this project - ";break;case"ADD_COLLAB":s+=t.userName,s+=" added ",s+=n.userName,s+=" to this project - ";break;case"REMOVE_COLLAB":s+=t.userName,s+=" removed ",s+=n.userName,s+=" from this project - ";break;case"INSERT":s+=t.userName,s+=" created this project - ";break;case"DELETE":s+=t.userName,s+=" deleted this project - "}return s+r}(e.action,a,l,t,{oldData:i,newData:o});return Object(O.jsx)("div",{children:u})}})}),Object(O.jsx)(ce.a,{})]})};var zt=function(e){var t=e.match,n=y(),a=Object(r.useContext)(J),s=Ue(),c=w("/api/user/all",n.user?n.user.token:null),i=Object(j.a)(c,1)[0],l=gt(),h=l.show,m=l.RenderDialogBox,p=gt(),f=p.show,x=p.RenderDialogBox;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(m,{heading:"Delete Project",closeButtonText:"Cancel",submitButtonText:"Delete",onSubmit:function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.handleDeleteProject(t);case 2:s.showNotificationWithText("Project Successfully Deleted!");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),render:function(e){return"Are you sure you would like to delete project with id "+e.data.projectId+"?"}}),Object(O.jsx)(x,{heading:"Add Collaborator",submitButtonText:"Add",formId:"collaborator-select-form",onSubmit:function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.handleAddCollaborator(t);case 2:s.showNotificationWithText("Collaborator Successfully Added to Project!");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),render:function(){return Object(O.jsx)(Pt,{formId:"collaborator-select-form",fieldName:"collaboratorId",initialValues:{collaboratorId:""},selectItems:i.data,itemKey:"userName"})}}),Object(O.jsxs)(o.d,{children:[Object(O.jsx)(o.b,{path:t.url,exact:!0,render:function(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(we,{}),Object(O.jsx)(Re,{projectList:a.data,onDelete:h,onEdit:a.handleEditProject,onAddCollaborator:f})]})}}),Object(O.jsx)(o.b,{path:"".concat(t.url,"/:projectId/issues/new"),exact:!0,render:function(e){return Object(O.jsx)(Xe,Object(b.a)(Object(b.a)({},e),{},{onSubmit:a.handleCreateIssue,onCreateAttachmentRequest:a.handleIssueAttachmentRequest,onAddAttachment:a.addIssueAttachmentHandles}))}}),Object(O.jsx)(o.b,{path:"".concat(t.url,"/:projectId/issues"),render:function(e){var t=a.data.findIndex((function(t){return t.id===Number(e.match.params.projectId)})),n=-1!==t?a.data[t].issues:[];return Object(O.jsx)(Ht,Object(b.a)(Object(b.a)({},e),{},{issues:n,onDelete:a.handleDeleteIssue,onAssign:a.handleAssignIssue,onStart:a.handleStartIssue,onClose:a.handleCloseIssue,onEdit:a.handleEditIssue,onCreateAttachmentRequest:a.handleIssueAttachmentRequest,onAddAttachment:a.addIssueAttachmentHandles}))}}),Object(O.jsx)(o.b,{path:"".concat(t.url,"/new"),exact:!0,render:function(e){return Object(O.jsx)(_e,Object(b.a)(Object(b.a)({},e),{},{onSubmit:a.handleAddProject}))}}),Object(O.jsx)(o.b,{path:"".concat(t.url,"/:projectId/"),exact:!0,render:function(e){var t=a.data.find((function(t){return t.id===Number(e.match.params.projectId)}));if(t)return Object(O.jsx)(Jt,Object(b.a)({project:t},e))}})]})]})};n(293);function Mt(e){return Object(O.jsxs)("div",{className:"user-info",children:[Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{lg:6,md:6,s:4,xs:12,className:"label",children:"First Name: "}),Object(O.jsx)(ie.a,{lg:6,md:6,s:8,xs:12,className:"user-detail",children:e.user.firstName})]}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{lg:6,md:6,s:4,xs:12,className:"label",children:"Last Name: "}),Object(O.jsx)(ie.a,{lg:6,md:6,s:8,xs:12,className:"user-detail",children:e.user.lastName})]}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{lg:6,md:6,s:4,xs:12,className:"label",children:"User Name: "}),Object(O.jsx)(ie.a,{lg:6,md:6,s:8,xs:12,className:"user-detail",children:e.user.userName})]}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{lg:6,md:6,s:4,xs:12,className:"label",children:"Email: "}),Object(O.jsx)(ie.a,{lg:6,md:6,s:8,xs:12,className:"user-detail",children:e.user.email})]})]})}n(294);function Gt(e){return Object(O.jsx)(oe.d,{initialValues:{currentPassword:"",newPassword:"",confirmNewPassword:""},onSubmit:function(){var t=Object(d.a)(u.a.mark((function t(n,r){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=r.setSubmitting)(!0),t.next=4,e.onSubmit(n.currentPassword,n.newPassword);case 4:a(!1);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),validationSchema:he,children:function(t){var n=t.isSubmitting;return Object(O.jsxs)(oe.c,{className:"form",children:[Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{children:Object(O.jsx)("label",{htmlFor:"currentPassword",children:"Current Password"})}),Object(O.jsxs)(ie.a,{children:[Object(O.jsx)(oe.b,{name:"currentPassword",type:"password",autoComplete:"new-password"}),Object(O.jsxs)("span",{className:"form-error",children:[e.error&&Object(O.jsx)("div",{children:e.error.message}),Object(O.jsx)(oe.a,{name:"currentPassword"})]})]})]}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{children:Object(O.jsx)("label",{htmlFor:"newPassword",children:"New Password"})}),Object(O.jsxs)(ie.a,{children:[Object(O.jsx)(oe.b,{name:"newPassword",type:"password",autoComplete:"new-password"}),Object(O.jsx)("span",{className:"form-error",children:Object(O.jsx)(oe.a,{name:"newPassword"})})]})]}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)(ie.a,{children:Object(O.jsx)("label",{htmlFor:"confirmNewPassword",children:"Confirm New Password"})}),Object(O.jsxs)(ie.a,{children:[Object(O.jsx)(oe.b,{name:"confirmNewPassword",type:"password",autoComplete:"off"}),Object(O.jsx)("span",{className:"form-error",children:Object(O.jsx)(oe.a,{name:"confirmNewPassword"})})]})]}),Object(O.jsx)(ce.a,{children:Object(O.jsx)(Q.a,{variant:"primary",type:"submit",disabled:n,children:"Submit"})})]})}})}function Xt(e){var t=y(),n=function(){var n=Object(d.a)(u.a.mark((function n(r,a){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.changePassword(r,a,function(){var n=Object(d.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r){n.next=5;break}return n.next=3,t.logout((function(){return e.history.push("/dashboard")}));case 3:n.next=6;break;case 5:console.log(r);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}();return Object(O.jsxs)(o.d,{children:[Object(O.jsx)(o.b,{path:e.match.url,exact:!0,render:function(){return Object(O.jsxs)(se.a,{fluid:!0,className:"page",id:"user-account",children:[Object(O.jsx)(ce.a,{as:"h4",children:"Account Information"}),Object(O.jsx)(ce.a,{children:Object(O.jsx)(Mt,{user:t.user})}),Object(O.jsxs)(ce.a,{children:[Object(O.jsx)("div",{children:"To change your password, click\xa0"}),Object(O.jsx)(i.b,{to:"account/changePassword",children:"here"}),"."]})]})}}),Object(O.jsx)(o.b,{path:e.match.url+"/changePassword",exact:!0,render:function(){return Object(O.jsxs)(se.a,{fluid:!0,className:"page",id:"change-password",children:[Object(O.jsx)("div",{children:" Change Password "}),Object(O.jsx)(Gt,{onSubmit:n,error:t.error})]})}})]})}n(295);function Yt(e){var t=Ue();return Object(O.jsx)("div",{className:"notification-banner-container "+(t.show?"show":""),children:Object(O.jsx)("div",{className:"notification-banner",children:t.text})})}var Qt=function(){return Object(O.jsx)(i.a,{children:Object(O.jsx)(g,{children:Object(O.jsx)(z,{children:Object(O.jsxs)(Ve,{children:[Object(O.jsx)(Yt,{}),Object(O.jsx)(ae,{}),Object(O.jsxs)(o.d,{children:[Object(O.jsx)(o.b,{path:"/login",component:Oe}),Object(O.jsx)(o.b,{path:"/signup",component:ge}),Object(O.jsx)(X,{path:"/dashboard",component:ye}),Object(O.jsx)(X,{path:"/projects",component:zt}),Object(O.jsx)(X,{path:"/account",component:Xt}),Object(O.jsx)(X,{path:"/",component:ye})]})]})})})})};var Zt=function(){return Object(O.jsx)("div",{className:"App",children:Object(O.jsx)(Qt,{})})},$t=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,313)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))};c.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(Zt,{})}),document.getElementById("root")),$t()}},[[296,1,2]]]);
//# sourceMappingURL=main.15ae9bd2.chunk.js.map